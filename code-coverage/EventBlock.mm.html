<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>EventBlock.mm - Slather</title>
<link href="slather.css" media="all" rel="stylesheet">
</head>
<body>
<header><div class="row"><a href="index.html"><img src="logo.jpg" alt="Slather logo"></a></div></header><div class="row"><div id="reports">
<h2 class="cov_title">
<span>Coverage for "EventBlock.mm" : </span><span class="cov_low">64.81%</span>
</h2>
<h4 class="cov_subtitle">(337 of 520 relevant lines covered)</h4>
<h4 class="cov_filepath">../Desktop/jenkins-agent/workspace/Utility jobs/Create a new version of framework/Source/TransportEncoding/EventBlock.mm</h4>
<table class="source_code">
<tr class="never">
<td class="num">1</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">2</td>
<td class="src"><pre><code class="objc">// Wire</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">3</td>
<td class="src"><pre><code class="objc">// Copyright (C) 2016 Wire Swiss GmbH</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">4</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">5</td>
<td class="src"><pre><code class="objc">// This program is free software: you can redistribute it and/or modify</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">6</td>
<td class="src"><pre><code class="objc">// it under the terms of the GNU General Public License as published by</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">7</td>
<td class="src"><pre><code class="objc">// the Free Software Foundation, either version 3 of the License, or</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">8</td>
<td class="src"><pre><code class="objc">// (at your option) any later version.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">9</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">10</td>
<td class="src"><pre><code class="objc">// This program is distributed in the hope that it will be useful,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">11</td>
<td class="src"><pre><code class="objc">// but WITHOUT ANY WARRANTY; without even the implied warranty of</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">12</td>
<td class="src"><pre><code class="objc">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">13</td>
<td class="src"><pre><code class="objc">// GNU General Public License for more details.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">14</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">15</td>
<td class="src"><pre><code class="objc">// You should have received a copy of the GNU General Public License</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">16</td>
<td class="src"><pre><code class="objc">// along with this program. If not, see http://www.gnu.org/licenses/.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">17</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">18</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">19</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">20</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">21</td>
<td class="src"><pre><code class="objc">#include "EventBlock.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">22</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">23</td>
<td class="src"><pre><code class="objc">namespace {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">24</td>
<td class="src"><pre><code class="objc">    const size_t EVENT_UID_SIZE = sizeof(EventUID::sequence) + sizeof(EventUID::random);</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">25</td>
<td class="src"><pre><code class="objc">    const size_t BLOCK_SIZE = EVENT_UID_SIZE*2;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">26</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">27</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">28</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">29</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">30</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">31</td>
<td class="src"><pre><code class="objc">EventBlock::EventBlock(const EventBlock&amp; other) : lowest(other.lowest), highest(other.highest) {</code></pre></td>
<td class="coverage">55x</td>
</tr>
<tr class="covered">
<td class="num">32</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">55x</td>
</tr>
<tr class="never">
<td class="num">33</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">34</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">35</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">36</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">37</td>
<td class="src"><pre><code class="objc">EventBlock::EventBlock(const std::vector&lt;EventUID&gt;&amp; list) {</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">38</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">39</td>
<td class="src"><pre><code class="objc">    if(!list.empty()) {</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">40</td>
<td class="src"><pre><code class="objc">        std::vector&lt;EventUID&gt; ordered(list.begin(), list.end());</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">41</td>
<td class="src"><pre><code class="objc">        std::sort(ordered.begin(), ordered.end());</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">42</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">43</td>
<td class="src"><pre><code class="objc">        lowest = *ordered.begin();</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">44</td>
<td class="src"><pre><code class="objc">        highest = *(ordered.end() -1);</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">45</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="covered">
<td class="num">46</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">21x</td>
</tr>
<tr class="never">
<td class="num">47</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">48</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">49</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">50</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">51</td>
<td class="src"><pre><code class="objc">void EventBlock::addEvent(const EventUID&amp; uid, bool authoritative) {</code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="covered">
<td class="num">52</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="covered">
<td class="num">53</td>
<td class="src"><pre><code class="objc">    if(!authoritative) {</code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="missed">
<td class="num">54</td>
<td class="src"><pre><code class="objc">        if(! canContain(uid)) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">55</td>
<td class="src"><pre><code class="objc">            NSCAssert(false, @"Can't contain");</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">56</td>
<td class="src"><pre><code class="objc">            return;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">57</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">58</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">59</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="covered">
<td class="num">60</td>
<td class="src"><pre><code class="objc">	if(empty()) {</code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="covered">
<td class="num">61</td>
<td class="src"><pre><code class="objc">        lowest = highest = uid;</code></pre></td>
<td class="coverage">52x</td>
</tr>
<tr class="covered">
<td class="num">62</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">52x</td>
</tr>
<tr class="covered">
<td class="num">63</td>
<td class="src"><pre><code class="objc">    else {</code></pre></td>
<td class="coverage">50x</td>
</tr>
<tr class="covered">
<td class="num">64</td>
<td class="src"><pre><code class="objc">        if(highest &lt; uid) {</code></pre></td>
<td class="coverage">50x</td>
</tr>
<tr class="covered">
<td class="num">65</td>
<td class="src"><pre><code class="objc">            NSCAssert(authoritative || highest.sequence == uid.sequence || highest.sequence +1 == uid.sequence, @"");</code></pre></td>
<td class="coverage">41x</td>
</tr>
<tr class="covered">
<td class="num">66</td>
<td class="src"><pre><code class="objc">            highest = uid;</code></pre></td>
<td class="coverage">41x</td>
</tr>
<tr class="covered">
<td class="num">67</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">41x</td>
</tr>
<tr class="covered">
<td class="num">68</td>
<td class="src"><pre><code class="objc">        else if(uid &lt; lowest) {</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="missed">
<td class="num">69</td>
<td class="src"><pre><code class="objc">            NSCAssert(authoritative || lowest.sequence == uid.sequence || lowest.sequence -1 == uid.sequence, @"");</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">70</td>
<td class="src"><pre><code class="objc">            lowest = uid;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">71</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">72</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">50x</td>
</tr>
<tr class="covered">
<td class="num">73</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">102x</td>
</tr>
<tr class="never">
<td class="num">74</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">75</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">76</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">77</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">78</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">79</td>
<td class="src"><pre><code class="objc">bool EventBlock::canContain(const EventUID&amp; uid) const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">80</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">81</td>
<td class="src"><pre><code class="objc">	if(empty()) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">82</td>
<td class="src"><pre><code class="objc">        return true;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">83</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">84</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">85</td>
<td class="src"><pre><code class="objc">    if(containsEvent(uid)) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">86</td>
<td class="src"><pre><code class="objc">        return true;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">87</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">88</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">89</td>
<td class="src"><pre><code class="objc">    if(highest.sequence &lt;= uid.sequence) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">90</td>
<td class="src"><pre><code class="objc">        return highest.sequence == uid.sequence || highest.sequence +1 == uid.sequence;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">91</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">92</td>
<td class="src"><pre><code class="objc">    else if(uid.sequence &lt;= lowest.sequence) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">93</td>
<td class="src"><pre><code class="objc">        return lowest.sequence == uid.sequence || lowest.sequence -1 == uid.sequence;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">94</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">95</td>
<td class="src"><pre><code class="objc">    else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">96</td>
<td class="src"><pre><code class="objc">        return false;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">97</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">98</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">99</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">100</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">101</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">102</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">103</td>
<td class="src"><pre><code class="objc">bool EventBlock::containsEvent(const EventUID&amp; uid) const {</code></pre></td>
<td class="coverage">62x</td>
</tr>
<tr class="covered">
<td class="num">104</td>
<td class="src"><pre><code class="objc">    return !empty() &amp;&amp; (lowest &lt;= uid &amp;&amp; uid &lt;= highest);</code></pre></td>
<td class="coverage">62x</td>
</tr>
<tr class="covered">
<td class="num">105</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">62x</td>
</tr>
<tr class="never">
<td class="num">106</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">107</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">108</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">109</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">110</td>
<td class="src"><pre><code class="objc">bool EventBlock::containsEvent(int sequence, UIDRand random) const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">111</td>
<td class="src"><pre><code class="objc">    return containsEvent(EventUID(sequence, random));</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">112</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">113</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">114</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">115</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">116</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">117</td>
<td class="src"><pre><code class="objc">NSString *EventBlock::description() const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">118</td>
<td class="src"><pre><code class="objc">    if(empty()) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">119</td>
<td class="src"><pre><code class="objc">        return @"[]";</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">120</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">121</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">122</td>
<td class="src"><pre><code class="objc">    return [NSString stringWithFormat:@"[%@ - %@]", lowest.description(), highest.description()];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">123</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">124</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">125</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">126</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">127</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">128</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">129</td>
<td class="src"><pre><code class="objc">bool EventBlock::empty() const {</code></pre></td>
<td class="coverage">214x</td>
</tr>
<tr class="covered">
<td class="num">130</td>
<td class="src"><pre><code class="objc">    return lowest == EventUID::UID_NONE;</code></pre></td>
<td class="coverage">214x</td>
</tr>
<tr class="covered">
<td class="num">131</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">214x</td>
</tr>
<tr class="never">
<td class="num">132</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">133</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">134</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">135</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">136</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">137</td>
<td class="src"><pre><code class="objc">bool EventBlock::shouldMerge(const EventBlock&amp; other) const {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">138</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">139</td>
<td class="src"><pre><code class="objc">    return internalShouldMerge(other) || other.internalShouldMerge(*this);</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">140</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="never">
<td class="num">141</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">142</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">143</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">144</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">145</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">146</td>
<td class="src"><pre><code class="objc">bool EventBlock::containsSequence(int seq) const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">147</td>
<td class="src"><pre><code class="objc">    return !empty() &amp;&amp; seq &gt;= lowest.sequence &amp;&amp; seq &lt;= highest.sequence;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">148</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">149</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">150</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">151</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">152</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">153</td>
<td class="src"><pre><code class="objc">bool EventBlock::internalShouldMerge(const EventBlock &amp;other) const {</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">154</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">155</td>
<td class="src"><pre><code class="objc">    if(empty() || other.empty()) {</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="missed">
<td class="num">156</td>
<td class="src"><pre><code class="objc">        return false;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">157</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">158</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">159</td>
<td class="src"><pre><code class="objc">    return containsEvent(other.lowest) || containsEvent(other.highest) || // contained</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">160</td>
<td class="src"><pre><code class="objc">    lowest.sequence == other.highest.sequence +1 || // contiguous sequences</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">161</td>
<td class="src"><pre><code class="objc">    lowest.sequence == other.highest.sequence; // overlapping sequences</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">162</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="never">
<td class="num">163</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">164</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">165</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">166</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">167</td>
<td class="src"><pre><code class="objc">EventUID EventBlock::getLowestEvent() const {</code></pre></td>
<td class="coverage">92x</td>
</tr>
<tr class="covered">
<td class="num">168</td>
<td class="src"><pre><code class="objc">    return lowest;</code></pre></td>
<td class="coverage">92x</td>
</tr>
<tr class="covered">
<td class="num">169</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">92x</td>
</tr>
<tr class="never">
<td class="num">170</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">171</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">172</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">173</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">174</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">175</td>
<td class="src"><pre><code class="objc">EventUID EventBlock::getHighestEvent() const {</code></pre></td>
<td class="coverage">72x</td>
</tr>
<tr class="covered">
<td class="num">176</td>
<td class="src"><pre><code class="objc">    return highest;</code></pre></td>
<td class="coverage">72x</td>
</tr>
<tr class="covered">
<td class="num">177</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">72x</td>
</tr>
<tr class="never">
<td class="num">178</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">179</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">180</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">181</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">182</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">183</td>
<td class="src"><pre><code class="objc">bool EventBlock::operator==(const EventBlock&amp; other) const {</code></pre></td>
<td class="coverage">11x</td>
</tr>
<tr class="covered">
<td class="num">184</td>
<td class="src"><pre><code class="objc">    return lowest == other.lowest &amp;&amp; highest == other.highest;</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">185</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">11x</td>
</tr>
<tr class="never">
<td class="num">186</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">187</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">188</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">189</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">190</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">191</td>
<td class="src"><pre><code class="objc">bool EventBlock::operator!=(const EventBlock&amp; other) const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">192</td>
<td class="src"><pre><code class="objc">    return ! operator==(other);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">193</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">194</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">195</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">196</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">197</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">198</td>
<td class="src"><pre><code class="objc">void EventBlock::merge(const EventBlock&amp; other) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">199</td>
<td class="src"><pre><code class="objc">    lowest = std::min(lowest, other.lowest);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">200</td>
<td class="src"><pre><code class="objc">    highest = std::max(highest, other.highest);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">201</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">202</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">203</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">204</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">205</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">206</td>
<td class="src"><pre><code class="objc">const EventUID EventBlockContainer::STARTING_EVENT {1,0};</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">207</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">208</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">209</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">210</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">211</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">212</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::add(const EventUID&amp; uid) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">213</td>
<td class="src"><pre><code class="objc">    internalAdd(uid);</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">214</td>
<td class="src"><pre><code class="objc">    hasGapCachedIsValid = false;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">215</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">216</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">217</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">218</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">219</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">220</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::internalAdd(const EventUID&amp; uid) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">221</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">222</td>
<td class="src"><pre><code class="objc">    for(auto it = blocks.begin(); it != blocks.end(); ++it) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="missed">
<td class="num">223</td>
<td class="src"><pre><code class="objc">        EventBlock&amp; bk = *it;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">224</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">225</td>
<td class="src"><pre><code class="objc">        // if it doesn't fit here, check if this should be inserted before, otherwise check next</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">226</td>
<td class="src"><pre><code class="objc">        if(!bk.canContain(uid)) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">227</td>
<td class="src"><pre><code class="objc">            </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">228</td>
<td class="src"><pre><code class="objc">            if(bk.getLowestEvent() &gt; uid) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">229</td>
<td class="src"><pre><code class="objc">                // insert in this gap (it is a gap, no need to check additional merges)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">230</td>
<td class="src"><pre><code class="objc">                </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">231</td>
<td class="src"><pre><code class="objc">                blocks.insert(it, EventBlock({uid}));</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">232</td>
<td class="src"><pre><code class="objc">                return; // done</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">233</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">234</td>
<td class="src"><pre><code class="objc">            continue;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">235</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">236</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">237</td>
<td class="src"><pre><code class="objc">        // add event to block</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">238</td>
<td class="src"><pre><code class="objc">        bk.addEvent(uid, false);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">239</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">240</td>
<td class="src"><pre><code class="objc">        // did adding this event to the block allow me to merge with the next block?</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">241</td>
<td class="src"><pre><code class="objc">        // because blocks are ordered, adding one event (that assumes no gaps in sequence)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">242</td>
<td class="src"><pre><code class="objc">        // can only cause this to merge with the next block as I already checked that the message</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">243</td>
<td class="src"><pre><code class="objc">        // couldn't be merged with the previous, and adding one event can't make it grow more than 1 sequence number</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">244</td>
<td class="src"><pre><code class="objc">        auto next = it;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">245</td>
<td class="src"><pre><code class="objc">        ++next;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">246</td>
<td class="src"><pre><code class="objc">        if(next != blocks.end()) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">247</td>
<td class="src"><pre><code class="objc">            EventBlock&amp; b2 = *next;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">248</td>
<td class="src"><pre><code class="objc">            if(bk.shouldMerge(b2)) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">249</td>
<td class="src"><pre><code class="objc">                bk.merge(b2);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">250</td>
<td class="src"><pre><code class="objc">                blocks.erase(next);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">251</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">252</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">253</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">254</td>
<td class="src"><pre><code class="objc">        return; // done, quit here</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">255</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">256</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">257</td>
<td class="src"><pre><code class="objc">    // if I reached here, I got to the end of the list without finding a fit</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">258</td>
<td class="src"><pre><code class="objc">    blocks.push_back(EventBlock({uid}));</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">259</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">260</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">261</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">262</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">263</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">264</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">265</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::add(const EventBlock&amp; block) {</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">266</td>
<td class="src"><pre><code class="objc">    internalAdd(block);</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">267</td>
<td class="src"><pre><code class="objc">    hasGapCachedIsValid = false;</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">268</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="never">
<td class="num">269</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">270</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">271</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">272</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">273</td>
<td class="src"><pre><code class="objc">EventBlock EventBlockContainer::blockForEvent(const EventUID &amp;uid) const</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">274</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">275</td>
<td class="src"><pre><code class="objc">    auto it = std::find_if(blocks.cbegin(), blocks.cend(), [uid](EventBlock const &amp;b){</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">276</td>
<td class="src"><pre><code class="objc">        return b.containsEvent(uid);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">277</td>
<td class="src"><pre><code class="objc">    });</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">278</td>
<td class="src"><pre><code class="objc">    return (it != blocks.cend()) ? *it : EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">279</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">280</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">281</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">282</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">283</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">284</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::internalAdd(const EventBlock&amp; block) {</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">285</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">286</td>
<td class="src"><pre><code class="objc">    // special case: if the block goes before the first block</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">287</td>
<td class="src"><pre><code class="objc">    // then add it here</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">288</td>
<td class="src"><pre><code class="objc">    if(blocks.empty()) {</code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">289</td>
<td class="src"><pre><code class="objc">        blocks.push_front(block);</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">290</td>
<td class="src"><pre><code class="objc">        return;</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">291</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">292</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">26x</td>
</tr>
<tr class="covered">
<td class="num">293</td>
<td class="src"><pre><code class="objc">    for(auto it = blocks.begin(); it != blocks.end(); ++it) {</code></pre></td>
<td class="coverage">14x</td>
</tr>
<tr class="covered">
<td class="num">294</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">295</td>
<td class="src"><pre><code class="objc">        EventBlock&amp; bk = *it;</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">296</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">297</td>
<td class="src"><pre><code class="objc">        // if I can't merge, check if this should be inserted before, otherwise check next</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">298</td>
<td class="src"><pre><code class="objc">        if(!bk.shouldMerge(block)) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">299</td>
<td class="src"><pre><code class="objc">            </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">300</td>
<td class="src"><pre><code class="objc">            if(bk.getLowestEvent().sequence &gt; block.getHighestEvent().sequence) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="missed">
<td class="num">301</td>
<td class="src"><pre><code class="objc">                // insert into this gap (it is a gap, no need to check additional merges)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">302</td>
<td class="src"><pre><code class="objc">                blocks.insert(it, block);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">303</td>
<td class="src"><pre><code class="objc">                return; // we are done</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">304</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">305</td>
<td class="src"><pre><code class="objc">            continue;</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">306</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">307</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">308</td>
<td class="src"><pre><code class="objc">        // the merge might cause $bk to be mergeable with the next ones (if $block was big enough).</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">309</td>
<td class="src"><pre><code class="objc">        // it can't be mergeable with the previous one because I already checked that $block could not</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">310</td>
<td class="src"><pre><code class="objc">        // be merged with it, and I assume that all blocks in the list are separated</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="missed">
<td class="num">311</td>
<td class="src"><pre><code class="objc">        bk.merge(block);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">312</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">313</td>
<td class="src"><pre><code class="objc">        // I will keep advancing the iterator as</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">314</td>
<td class="src"><pre><code class="objc">        // long as I find blocks that I can merge. Then I will merge all of them at once.</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">315</td>
<td class="src"><pre><code class="objc">        auto it2 = it;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">316</td>
<td class="src"><pre><code class="objc">        ++it2;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">317</td>
<td class="src"><pre><code class="objc">        for(; it2 != blocks.end() &amp;&amp; bk.shouldMerge(*it2); ++it2) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">318</td>
<td class="src"><pre><code class="objc">            bk.merge(*it2);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">319</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">320</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">321</td>
<td class="src"><pre><code class="objc">        // roll back one to find the last mergeable</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">322</td>
<td class="src"><pre><code class="objc">        --it2;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">323</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">324</td>
<td class="src"><pre><code class="objc">        // now it2 points to the next block after the last one that can be merged. Roll back 1, delete everything in between</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">325</td>
<td class="src"><pre><code class="objc">        if(it2 != it) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">326</td>
<td class="src"><pre><code class="objc">            blocks.erase(++it,++it2); // messed up $it</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">327</td>
<td class="src"><pre><code class="objc">            return; // leave here as a reminder that $it is messed up</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">328</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">329</td>
<td class="src"><pre><code class="objc">        return;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">330</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">331</td>
<td class="src"><pre><code class="objc">	</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">332</td>
<td class="src"><pre><code class="objc">    // If I reached here, I got to the end of the list without finding a fit</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">333</td>
<td class="src"><pre><code class="objc">    blocks.push_back(block);</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">334</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="never">
<td class="num">335</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">336</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">337</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">338</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">339</td>
<td class="src"><pre><code class="objc">EventBlock EventBlockContainer::getGap(bool fromStart) const {</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">340</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">341</td>
<td class="src"><pre><code class="objc">    if(blocks.empty()) {</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">342</td>
<td class="src"><pre><code class="objc">        if(windowStart.empty() || windowEnd.empty()) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">343</td>
<td class="src"><pre><code class="objc">            // how am I supposed to know?? no gap</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">344</td>
<td class="src"><pre><code class="objc">            return EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">345</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">346</td>
<td class="src"><pre><code class="objc">        else {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">347</td>
<td class="src"><pre><code class="objc">            return EventBlock({windowStart, windowEnd});</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">348</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">349</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">350</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">351</td>
<td class="src"><pre><code class="objc">    // I should treat 1.0 as an a special case, because it's not a literal 1.0 but any 1.x</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">352</td>
<td class="src"><pre><code class="objc">    const bool isStartGenericOne = windowStart == STARTING_EVENT;</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">353</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">354</td>
<td class="src"><pre><code class="objc">    // open start</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">355</td>
<td class="src"><pre><code class="objc">    const bool hasStart = !windowStart.empty();</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">356</td>
<td class="src"><pre><code class="objc">    // open end</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">357</td>
<td class="src"><pre><code class="objc">    const bool hasEnd = !windowEnd.empty();</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">358</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">359</td>
<td class="src"><pre><code class="objc">    // lowest in the collection</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">360</td>
<td class="src"><pre><code class="objc">    const auto lowest = getLowestEvent();</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">361</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">362</td>
<td class="src"><pre><code class="objc">    // "real" expected start. it might be 1.x</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">363</td>
<td class="src"><pre><code class="objc">    auto realStart = hasStart ? windowStart : lowest;</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">364</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">365</td>
<td class="src"><pre><code class="objc">    if(isStartGenericOne) {</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">366</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">367</td>
<td class="src"><pre><code class="objc">        // if it's 1.x, and I have 1, replace. If I don't have one, keep 1.0 as 0 is guaranteed to be smaller than anything on the server</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">368</td>
<td class="src"><pre><code class="objc">        if(isStartGenericOne &amp;&amp; lowest.sequence == 1) {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">369</td>
<td class="src"><pre><code class="objc">            realStart = lowest;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">370</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">371</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">372</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">373</td>
<td class="src"><pre><code class="objc">    // real expected end</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">374</td>
<td class="src"><pre><code class="objc">    const auto realEnd = hasEnd ? windowEnd : getHighestEvent();</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="covered">
<td class="num">375</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">376</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">377</td>
<td class="src"><pre><code class="objc">    EventBlock gap;</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">378</td>
<td class="src"><pre><code class="objc">    // am I looking for the lowest gap?</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">379</td>
<td class="src"><pre><code class="objc">    if(fromStart) {</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="covered">
<td class="num">380</td>
<td class="src"><pre><code class="objc">        return findLowestGap(realStart, realEnd);</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">381</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">382</td>
<td class="src"><pre><code class="objc">    else { // ! fromStart</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">383</td>
<td class="src"><pre><code class="objc">        return findHighestGap(realStart, realEnd);</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">384</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">385</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">18x</td>
</tr>
<tr class="never">
<td class="num">386</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">387</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">388</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">389</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">390</td>
<td class="src"><pre><code class="objc">EventBlock EventBlockContainer::findLowestGap(const EventUID&amp; start, const EventUID&amp; end) const {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">391</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">392</td>
<td class="src"><pre><code class="objc">    // lowest in the container</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">393</td>
<td class="src"><pre><code class="objc">    const auto lowest = getLowestEvent();</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">394</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">395</td>
<td class="src"><pre><code class="objc">    // highest in the container</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">396</td>
<td class="src"><pre><code class="objc">    const auto highest = getHighestEvent();</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">397</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">398</td>
<td class="src"><pre><code class="objc">    // sanity checks</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">399</td>
<td class="src"><pre><code class="objc">    NSCAssert(lowest &lt;= highest, @"");</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">400</td>
<td class="src"><pre><code class="objc">    if(start &gt; end) {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="missed">
<td class="num">401</td>
<td class="src"><pre><code class="objc">        return EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">402</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">403</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">404</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">405</td>
<td class="src"><pre><code class="objc">	// is the start smaller than what I have? that's the first gap</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">406</td>
<td class="src"><pre><code class="objc">    if(start &lt; lowest) {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">407</td>
<td class="src"><pre><code class="objc">        return EventBlock({start, std::min(lowest, end)});</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">408</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">409</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">410</td>
<td class="src"><pre><code class="objc">    // is the start bigger than what I have? then it's start-end</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">411</td>
<td class="src"><pre><code class="objc">    if(start &gt; highest) {</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">412</td>
<td class="src"><pre><code class="objc">        return EventBlock({start, end});</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">413</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">414</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">415</td>
<td class="src"><pre><code class="objc">    // scan for something after expected start, linearely, ascending</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">416</td>
<td class="src"><pre><code class="objc">    for(auto it = blocks.begin(); it != blocks.end(); ++it) {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">417</td>
<td class="src"><pre><code class="objc">        const EventBlock&amp; block = *it;</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">418</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">419</td>
<td class="src"><pre><code class="objc">        // it's in this block</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">420</td>
<td class="src"><pre><code class="objc">        if(block.containsEvent(start))</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">421</td>
<td class="src"><pre><code class="objc">        {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">422</td>
<td class="src"><pre><code class="objc">            // is the expected ending also in this block?</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">423</td>
<td class="src"><pre><code class="objc">            if(block.containsEvent(end)) {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">424</td>
<td class="src"><pre><code class="objc">                return EventBlock(); // we have everything!</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">425</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">426</td>
<td class="src"><pre><code class="objc">            else {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">427</td>
<td class="src"><pre><code class="objc">                // there's a gap. If this is not the last block, return the gap between this and the next.</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">428</td>
<td class="src"><pre><code class="objc">                auto itNext = it;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">429</td>
<td class="src"><pre><code class="objc">                </code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">430</td>
<td class="src"><pre><code class="objc">                // look at the next one</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">431</td>
<td class="src"><pre><code class="objc">                ++itNext;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">432</td>
<td class="src"><pre><code class="objc">                </code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">433</td>
<td class="src"><pre><code class="objc">                // there's no next, or the next is anyway bigger than realEnd, gap is end of this until real end</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">434</td>
<td class="src"><pre><code class="objc">                if(itNext == blocks.end() || itNext-&gt;getLowestEvent() &gt; end) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">435</td>
<td class="src"><pre><code class="objc">                    return EventBlock({it-&gt;getHighestEvent(), end});</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">436</td>
<td class="src"><pre><code class="objc">                }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">437</td>
<td class="src"><pre><code class="objc">                else {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">438</td>
<td class="src"><pre><code class="objc">                    // there's a block, smaller than end</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">439</td>
<td class="src"><pre><code class="objc">                    return EventBlock({it-&gt;getHighestEvent(), itNext-&gt;getLowestEvent()});</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">440</td>
<td class="src"><pre><code class="objc">                }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">441</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">442</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="missed">
<td class="num">443</td>
<td class="src"><pre><code class="objc">        else if(block.getHighestEvent() &lt; start) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">444</td>
<td class="src"><pre><code class="objc">            // this block is out of my window, ignore</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">445</td>
<td class="src"><pre><code class="objc">            continue;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">446</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">447</td>
<td class="src"><pre><code class="objc">        else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">448</td>
<td class="src"><pre><code class="objc">            // not out of my window, but I'm not inside this block. Then there must be a gap between the start of the window and this block, bingo.</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">449</td>
<td class="src"><pre><code class="objc">            return EventBlock({start, block.getLowestEvent()});</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">450</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">451</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">452</td>
<td class="src"><pre><code class="objc">    } // for</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">453</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="missed">
<td class="num">454</td>
<td class="src"><pre><code class="objc">    NSCAssert(false, @"Should never get here");</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">455</td>
<td class="src"><pre><code class="objc">    return EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">456</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="never">
<td class="num">457</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">458</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">459</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">460</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">461</td>
<td class="src"><pre><code class="objc">EventBlock EventBlockContainer::findHighestGap(const EventUID&amp; start, const EventUID&amp; end) const {</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">462</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">463</td>
<td class="src"><pre><code class="objc">	// lowest in the container</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">464</td>
<td class="src"><pre><code class="objc">    const auto lowest = getLowestEvent();</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">465</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">466</td>
<td class="src"><pre><code class="objc">    // highest in the container</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">467</td>
<td class="src"><pre><code class="objc">    const auto highest = getHighestEvent();</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">468</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">469</td>
<td class="src"><pre><code class="objc">    // sanity checks</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">470</td>
<td class="src"><pre><code class="objc">    NSCAssert(lowest &lt;= highest, @"");</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">471</td>
<td class="src"><pre><code class="objc">    if(start &gt; end) {</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="missed">
<td class="num">472</td>
<td class="src"><pre><code class="objc">        return EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">473</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">474</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">475</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">476</td>
<td class="src"><pre><code class="objc">	// is the end bigger than what I have? that's the first gap</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">477</td>
<td class="src"><pre><code class="objc">    if(end &gt; highest) {</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">478</td>
<td class="src"><pre><code class="objc">        return EventBlock({end, std::max(highest, start)});</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">479</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">480</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">481</td>
<td class="src"><pre><code class="objc">    // is the end smaller than what I have? then it's start-end</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">482</td>
<td class="src"><pre><code class="objc">    if(end &lt; lowest) {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">483</td>
<td class="src"><pre><code class="objc">        return EventBlock({start, end});</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">484</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">485</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">486</td>
<td class="src"><pre><code class="objc">    // scan for something after expected start, linearely, ascending</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">487</td>
<td class="src"><pre><code class="objc">    for(auto it = blocks.crbegin(); it != blocks.crend(); ++it) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">488</td>
<td class="src"><pre><code class="objc">        const EventBlock&amp; block = *it;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">489</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">490</td>
<td class="src"><pre><code class="objc">        // it's in this block</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">491</td>
<td class="src"><pre><code class="objc">        if(block.containsEvent(end))</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">492</td>
<td class="src"><pre><code class="objc">        {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">493</td>
<td class="src"><pre><code class="objc">            // is the expected start also in this block?</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">494</td>
<td class="src"><pre><code class="objc">            if(block.containsEvent(start)) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">495</td>
<td class="src"><pre><code class="objc">                return EventBlock(); // we have everything!</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">496</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">497</td>
<td class="src"><pre><code class="objc">            else {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">498</td>
<td class="src"><pre><code class="objc">                // there's a gap. If this is not the first block, return the gap between this and the next.</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">499</td>
<td class="src"><pre><code class="objc">                auto itNext = it;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">500</td>
<td class="src"><pre><code class="objc">                </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">501</td>
<td class="src"><pre><code class="objc">                // look at the next one</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">502</td>
<td class="src"><pre><code class="objc">                ++itNext;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">503</td>
<td class="src"><pre><code class="objc">                </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">504</td>
<td class="src"><pre><code class="objc">                // there's no next, or the next is anyway smaller than start, gap is start of this until real start</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">505</td>
<td class="src"><pre><code class="objc">                if(itNext == blocks.rend() || itNext-&gt;getHighestEvent() &lt; start) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">506</td>
<td class="src"><pre><code class="objc">                    return EventBlock({it-&gt;getLowestEvent(), start});</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">507</td>
<td class="src"><pre><code class="objc">                }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">508</td>
<td class="src"><pre><code class="objc">                else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">509</td>
<td class="src"><pre><code class="objc">                    // there's a block, bigger than start</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">510</td>
<td class="src"><pre><code class="objc">                    return EventBlock({it-&gt;getLowestEvent(), itNext-&gt;getHighestEvent()});</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">511</td>
<td class="src"><pre><code class="objc">                }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">512</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">513</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="missed">
<td class="num">514</td>
<td class="src"><pre><code class="objc">        else if(block.getLowestEvent() &gt; end) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">515</td>
<td class="src"><pre><code class="objc">            // this block is out of my window, ignore</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">516</td>
<td class="src"><pre><code class="objc">            continue;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">517</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">518</td>
<td class="src"><pre><code class="objc">        else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">519</td>
<td class="src"><pre><code class="objc">            // not out of my window, but I'm not inside this block. Then there must be a gap between the end of the window and this block, bingo.</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">520</td>
<td class="src"><pre><code class="objc">            return EventBlock({end, block.getHighestEvent()});</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">521</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">522</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">523</td>
<td class="src"><pre><code class="objc">    } // for</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">524</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="missed">
<td class="num">525</td>
<td class="src"><pre><code class="objc">    NSCAssert(false, @"Should never get here");</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">526</td>
<td class="src"><pre><code class="objc">    return EventBlock();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">527</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="never">
<td class="num">528</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">529</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">530</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">531</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">532</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">533</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">534</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">535</td>
<td class="src"><pre><code class="objc">bool EventBlockContainer::hasEvent(const EventUID&amp; uid) const {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">536</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">537</td>
<td class="src"><pre><code class="objc">    for(auto&amp; bk : blocks) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">538</td>
<td class="src"><pre><code class="objc">        if(bk.containsEvent(uid)) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">539</td>
<td class="src"><pre><code class="objc">            return true;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">540</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">541</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">542</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">543</td>
<td class="src"><pre><code class="objc">    return false;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">544</td>
<td class="src"><pre><code class="objc">	</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">545</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="never">
<td class="num">546</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">547</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">548</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">549</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">550</td>
<td class="src"><pre><code class="objc">EventUID EventBlockContainer::getLowestEvent()const {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">551</td>
<td class="src"><pre><code class="objc">    if(blocks.empty()) {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="missed">
<td class="num">552</td>
<td class="src"><pre><code class="objc">        return EventUID::UID_NONE;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">553</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">554</td>
<td class="src"><pre><code class="objc">	</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">555</td>
<td class="src"><pre><code class="objc">    return blocks.begin()-&gt;getLowestEvent();</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">556</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="never">
<td class="num">557</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">558</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">559</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">560</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">561</td>
<td class="src"><pre><code class="objc">EventUID EventBlockContainer::getHighestEvent()const {</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">562</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">563</td>
<td class="src"><pre><code class="objc">	if(blocks.empty()) {</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="missed">
<td class="num">564</td>
<td class="src"><pre><code class="objc">        return EventUID::UID_NONE;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">565</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">566</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">567</td>
<td class="src"><pre><code class="objc">    return (--blocks.end())-&gt;getHighestEvent();</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">568</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="never">
<td class="num">569</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">570</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">571</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">572</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">573</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::setWindow(const EventUID&amp; lower, const EventUID&amp; higher) {</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">574</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">575</td>
<td class="src"><pre><code class="objc">	// sanity. to be safe, also return no gap</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">576</td>
<td class="src"><pre><code class="objc">    if(!higher.empty() &amp;&amp; !lower.empty()) {</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">577</td>
<td class="src"><pre><code class="objc">        NSCAssert(lower &lt;= higher, @"start should be &lt; end");</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">578</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">19x</td>
</tr>
<tr class="covered">
<td class="num">579</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">580</td>
<td class="src"><pre><code class="objc">    windowEnd = higher;</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">581</td>
<td class="src"><pre><code class="objc">    windowStart = lower;</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">582</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">583</td>
<td class="src"><pre><code class="objc">    // invaludate cache</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">584</td>
<td class="src"><pre><code class="objc">    hasGapCachedIsValid = false;</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">585</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">586</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="never">
<td class="num">587</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">588</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">589</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">590</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">591</td>
<td class="src"><pre><code class="objc">bool EventBlockContainer::empty() const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">592</td>
<td class="src"><pre><code class="objc">	return blocks.empty();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">593</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">594</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">595</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">596</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">597</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">598</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">599</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::setWindowUpperBound(const EventUID &amp;bound) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">600</td>
<td class="src"><pre><code class="objc">	windowEnd = bound;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">601</td>
<td class="src"><pre><code class="objc">    hasGapCachedIsValid = false;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">602</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">603</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">604</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">605</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">606</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">607</td>
<td class="src"><pre><code class="objc">void EventBlockContainer::setWindowLowerBound(const EventUID &amp;bound) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">608</td>
<td class="src"><pre><code class="objc">	windowStart = bound;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">609</td>
<td class="src"><pre><code class="objc">    hasGapCachedIsValid = false;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">610</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">611</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">612</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">613</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">614</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">615</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">616</td>
<td class="src"><pre><code class="objc">bool EventBlockContainer::hasGap() const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">617</td>
<td class="src"><pre><code class="objc">    if(!hasGapCachedIsValid) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">618</td>
<td class="src"><pre><code class="objc">        auto gap = getGap(true);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">619</td>
<td class="src"><pre><code class="objc">        hasGapCached = !gap.empty();</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">620</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">621</td>
<td class="src"><pre><code class="objc">    return hasGapCached;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">622</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">623</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">624</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">625</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">626</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">627</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">628</td>
<td class="src"><pre><code class="objc">namespace {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">629</td>
<td class="src"><pre><code class="objc">    void copyEventBlockBytes(EventUID block, unsigned char* destination, size_t&amp; offset) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">630</td>
<td class="src"><pre><code class="objc">        memcpy(destination + offset, &amp;block.sequence, sizeof(EventUID::sequence));</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">631</td>
<td class="src"><pre><code class="objc">        memcpy(destination + offset + sizeof(EventUID::sequence), &amp;block.random, sizeof(EventUID::random));</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">632</td>
<td class="src"><pre><code class="objc">        offset += EVENT_UID_SIZE;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">633</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="never">
<td class="num">634</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">635</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">636</td>
<td class="src"><pre><code class="objc">NSData *EventBlockContainer::serialize() const {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">637</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">638</td>
<td class="src"><pre><code class="objc">    // a block is 2 event IDs</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">639</td>
<td class="src"><pre><code class="objc">    std::vector&lt;unsigned char&gt; mem(blocks.size() * BLOCK_SIZE, 0);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">640</td>
<td class="src"><pre><code class="objc">    size_t count = 0;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">641</td>
<td class="src"><pre><code class="objc">    for(EventBlock b : blocks) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">642</td>
<td class="src"><pre><code class="objc">        EventUID lowest = b.getLowestEvent();</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">643</td>
<td class="src"><pre><code class="objc">        EventUID highest = b.getHighestEvent();</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">644</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">645</td>
<td class="src"><pre><code class="objc">        copyEventBlockBytes(lowest, mem.data(), count);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">646</td>
<td class="src"><pre><code class="objc">        copyEventBlockBytes(highest, mem.data(), count);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">647</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">648</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">649</td>
<td class="src"><pre><code class="objc">    return [NSData dataWithBytes:(void *)mem.data() length:mem.size()];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">650</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">651</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">652</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">653</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">654</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">655</td>
<td class="src"><pre><code class="objc">namespace {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">656</td>
<td class="src"><pre><code class="objc">    EventUID eventUIDFromBytes(unsigned char* data, size_t&amp; offset) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">657</td>
<td class="src"><pre><code class="objc">        int sequence = 0;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">658</td>
<td class="src"><pre><code class="objc">        UIDRand random = 0;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">659</td>
<td class="src"><pre><code class="objc">        memcpy(&amp;sequence, data + offset, sizeof(EventUID::sequence));</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">660</td>
<td class="src"><pre><code class="objc">        memcpy(&amp;random, data + offset + sizeof(EventUID::sequence), sizeof(EventUID::random));</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">661</td>
<td class="src"><pre><code class="objc">        offset += EVENT_UID_SIZE;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">662</td>
<td class="src"><pre><code class="objc">        return EventUID(sequence, random);</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">663</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="never">
<td class="num">664</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">665</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">666</td>
<td class="src"><pre><code class="objc">EventBlockContainer::EventBlockContainer(NSData *serializedData)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">667</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">668</td>
<td class="src"><pre><code class="objc">    NSCAssert(serializedData.length % BLOCK_SIZE == 0, @"Data does not seem to contain blocks");</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">669</td>
<td class="src"><pre><code class="objc">    const size_t numBlocks = serializedData.length / BLOCK_SIZE;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">670</td>
<td class="src"><pre><code class="objc">    unsigned char* data = (unsigned char*) [serializedData bytes];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">671</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">672</td>
<td class="src"><pre><code class="objc">    size_t offset = 0;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">673</td>
<td class="src"><pre><code class="objc">    for(size_t i = 0; i &lt; numBlocks; ++i) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">674</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">675</td>
<td class="src"><pre><code class="objc">        const EventUID low = eventUIDFromBytes(data, offset);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">676</td>
<td class="src"><pre><code class="objc">        const EventUID high = eventUIDFromBytes(data, offset);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">677</td>
<td class="src"><pre><code class="objc">        EventBlock block({low, high});</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">678</td>
<td class="src"><pre><code class="objc">        add(block);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">679</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">680</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">681</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">682</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">683</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">684</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">685</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">686</td>
<td class="src"><pre><code class="objc">std::pair&lt;EventUID, EventUID&gt; EventBlockContainer::getWindow()const {</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">687</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">688</td>
<td class="src"><pre><code class="objc">	return std::make_pair(windowStart, windowEnd);</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">689</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="never">
<td class="num">690</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">691</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">692</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">693</td>
<td class="src"><pre><code class="objc">//////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">694</td>
<td class="src"><pre><code class="objc">NSString * EventBlockContainer::description() const {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">695</td>
<td class="src"><pre><code class="objc">	</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">696</td>
<td class="src"><pre><code class="objc">    NSMutableArray *components = [NSMutableArray array];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">697</td>
<td class="src"><pre><code class="objc">    for(auto b : blocks) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">698</td>
<td class="src"><pre><code class="objc">        [components addObject:b.description()];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">699</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">700</td>
<td class="src"><pre><code class="objc">    NSMutableString *description = [NSMutableString stringWithString:@"(Window: "];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">701</td>
<td class="src"><pre><code class="objc">    if (windowStart.empty()) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">702</td>
<td class="src"><pre><code class="objc">        [description appendString:@"*"];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">703</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">704</td>
<td class="src"><pre><code class="objc">        [description appendString:windowStart.description()];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">705</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">706</td>
<td class="src"><pre><code class="objc">    [description appendString:@", "];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">707</td>
<td class="src"><pre><code class="objc">    if (windowEnd.empty()) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">708</td>
<td class="src"><pre><code class="objc">        [description appendString:@"*"];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">709</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">710</td>
<td class="src"><pre><code class="objc">        [description appendString:windowEnd.description()];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">711</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">712</td>
<td class="src"><pre><code class="objc">    [description appendFormat:@") [%@]", [components componentsJoinedByString:@", "]];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">713</td>
<td class="src"><pre><code class="objc">    return description;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">714</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">715</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">716</td>
<td class="src"><pre><code class="objc">/////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">717</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">718</td>
<td class="src"><pre><code class="objc">/////////////////////////////////////////////////////////</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">719</td>
<td class="src"><pre><code class="objc">bool EventBlockContainer::operator==(const EventBlockContainer&amp; other) const {</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">720</td>
<td class="src"><pre><code class="objc">    return blocks == other.blocks</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">721</td>
<td class="src"><pre><code class="objc">        &amp;&amp; windowStart == other.windowStart</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">722</td>
<td class="src"><pre><code class="objc">        &amp;&amp; windowEnd == other.windowEnd;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">723</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="never">
<td class="num">724</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">725</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
</table>
</div></div>
<footer><div class="row">
<p><a href="https://github.com/SlatherOrg/slather">Fork me on Github</a></p>
<p>&copy; 2016 Slather</p>
</div></footer><script src="highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
