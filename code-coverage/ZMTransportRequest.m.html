<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>ZMTransportRequest.m - Slather</title>
<link href="slather.css" media="all" rel="stylesheet">
</head>
<body>
<header><div class="row"><a href="index.html"><img src="logo.jpg" alt="Slather logo"></a></div></header><div class="row"><div id="reports">
<h2 class="cov_title">
<span>Coverage for "ZMTransportRequest.m" : </span><span class="cov_high">87.33%</span>
</h2>
<h4 class="cov_subtitle">(510 of 584 relevant lines covered)</h4>
<h4 class="cov_filepath">../Desktop/jenkins-agent/workspace/Utility jobs/Create a new version of framework/Source/Requests/ZMTransportRequest.m</h4>
<table class="source_code">
<tr class="never">
<td class="num">1</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">2</td>
<td class="src"><pre><code class="objc">// Wire</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">3</td>
<td class="src"><pre><code class="objc">// Copyright (C) 2016 Wire Swiss GmbH</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">4</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">5</td>
<td class="src"><pre><code class="objc">// This program is free software: you can redistribute it and/or modify</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">6</td>
<td class="src"><pre><code class="objc">// it under the terms of the GNU General Public License as published by</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">7</td>
<td class="src"><pre><code class="objc">// the Free Software Foundation, either version 3 of the License, or</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">8</td>
<td class="src"><pre><code class="objc">// (at your option) any later version.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">9</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">10</td>
<td class="src"><pre><code class="objc">// This program is distributed in the hope that it will be useful,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">11</td>
<td class="src"><pre><code class="objc">// but WITHOUT ANY WARRANTY; without even the implied warranty of</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">12</td>
<td class="src"><pre><code class="objc">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">13</td>
<td class="src"><pre><code class="objc">// GNU General Public License for more details.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">14</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">15</td>
<td class="src"><pre><code class="objc">// You should have received a copy of the GNU General Public License</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">16</td>
<td class="src"><pre><code class="objc">// along with this program. If not, see http://www.gnu.org/licenses/.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">17</td>
<td class="src"><pre><code class="objc">// </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">18</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">19</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">20</td>
<td class="src"><pre><code class="objc">@import ZMUtilities;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">21</td>
<td class="src"><pre><code class="objc">@import ZMCSystem;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">22</td>
<td class="src"><pre><code class="objc">@import ImageIO;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">23</td>
<td class="src"><pre><code class="objc">@import MobileCoreServices;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">24</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">25</td>
<td class="src"><pre><code class="objc">#import &lt;ZMTransport/ZMTransport-Swift.h&gt;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">26</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">27</td>
<td class="src"><pre><code class="objc">#import "ZMTransportRequest+Internal.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">28</td>
<td class="src"><pre><code class="objc">#import "ZMTransportData.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">29</td>
<td class="src"><pre><code class="objc">#import "ZMTransportResponse.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">30</td>
<td class="src"><pre><code class="objc">#import "ZMTransportCodec.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">31</td>
<td class="src"><pre><code class="objc">#import "ZMBackgroundActivity.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">32</td>
<td class="src"><pre><code class="objc">#import "NSData+Multipart.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">33</td>
<td class="src"><pre><code class="objc">#import "ZMURLSession.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">34</td>
<td class="src"><pre><code class="objc">#import "ZMTaskIdentifier.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">35</td>
<td class="src"><pre><code class="objc">#import "ZMTransportRequest+AssetGet.h"</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">36</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">37</td>
<td class="src"><pre><code class="objc">const NSTimeInterval ZMTransportRequestDefaultExpirationInterval = 60;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">38</td>
<td class="src"><pre><code class="objc">const NSTimeInterval ZMTransportRequestReducedExpirationInterval = 25;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">39</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">40</td>
<td class="src"><pre><code class="objc">/// OS X 10.9 does not have uniform type identifiers with JSON support</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">41</td>
<td class="src"><pre><code class="objc">static BOOL hasUTJSONSupport(void)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">42</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">43</td>
<td class="src"><pre><code class="objc">    return (&amp;UTTypeIsDynamic != NULL);</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">44</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="never">
<td class="num">45</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">46</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">47</td>
<td class="src"><pre><code class="objc">typedef NS_ENUM(NSUInteger, ZMTransportRequestSessionType) {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">48</td>
<td class="src"><pre><code class="objc">    ZMTransportRequestSessionTypeUseDefaultSession,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">49</td>
<td class="src"><pre><code class="objc">    ZMTransportRequestSessionTypeUseBackgroundSessionOnly,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">50</td>
<td class="src"><pre><code class="objc">    ZMTransportRequestSessionTypeUseVoipSessionOnly,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">51</td>
<td class="src"><pre><code class="objc">};</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">52</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">53</td>
<td class="src"><pre><code class="objc">@interface ZMCompletionHandler ()</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">54</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">55</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">56</td>
<td class="src"><pre><code class="objc">@property (nonatomic) id&lt;ZMSGroupQueue&gt; groupQueue;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">57</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) ZMCompletionHandlerBlock block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">58</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">59</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">60</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">61</td>
<td class="src"><pre><code class="objc">@implementation ZMCompletionHandler</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">62</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">63</td>
<td class="src"><pre><code class="objc">+ (instancetype)handlerOnGroupQueue:(id&lt;ZMSGroupQueue&gt;)groupQueue block:(ZMCompletionHandlerBlock)block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">64</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">65</td>
<td class="src"><pre><code class="objc">    RequireString(block != nil, "Invalid completion handler");</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">66</td>
<td class="src"><pre><code class="objc">    RequireString(groupQueue != nil, "Invalid group queue");</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">67</td>
<td class="src"><pre><code class="objc">    ZMCompletionHandler *handler = [[self alloc] init];</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">68</td>
<td class="src"><pre><code class="objc">    if (handler != nil) {</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">69</td>
<td class="src"><pre><code class="objc">        handler.groupQueue = groupQueue;</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">70</td>
<td class="src"><pre><code class="objc">        handler.block = block;</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">71</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">72</td>
<td class="src"><pre><code class="objc">    return handler;</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">73</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="never">
<td class="num">74</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">75</td>
<td class="src"><pre><code class="objc">@end;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">76</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">77</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">78</td>
<td class="src"><pre><code class="objc">@interface ZMTaskCreatedHandler ()</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">79</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">80</td>
<td class="src"><pre><code class="objc">@property (nonatomic) id&lt;ZMSGroupQueue&gt; groupQueue;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">81</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) ZMTaskCreatedBlock block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">82</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">83</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">84</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">85</td>
<td class="src"><pre><code class="objc">@implementation ZMTaskCreatedHandler</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">86</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">87</td>
<td class="src"><pre><code class="objc">+ (instancetype)handlerOnGroupQueue:(id&lt;ZMSGroupQueue&gt;)groupQueue block:(ZMTaskCreatedBlock)block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">88</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">89</td>
<td class="src"><pre><code class="objc">    RequireString(block != nil, "Invalid completion handler");</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">90</td>
<td class="src"><pre><code class="objc">    RequireString(groupQueue != nil, "Invalid group queue");</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">91</td>
<td class="src"><pre><code class="objc">    ZMTaskCreatedHandler *handler = [[self alloc] init];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">92</td>
<td class="src"><pre><code class="objc">    if (handler != nil) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">93</td>
<td class="src"><pre><code class="objc">        handler.groupQueue = groupQueue;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">94</td>
<td class="src"><pre><code class="objc">        handler.block = block;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">95</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">96</td>
<td class="src"><pre><code class="objc">    return handler;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">97</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">98</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">99</td>
<td class="src"><pre><code class="objc">@end;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">100</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">101</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">102</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">103</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">104</td>
<td class="src"><pre><code class="objc">@interface ZMTaskProgressHandler ()</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">105</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">106</td>
<td class="src"><pre><code class="objc">@property (nonatomic) id&lt;ZMSGroupQueue&gt; groupQueue;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">107</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) ZMProgressHandlerBlock block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">108</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">109</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">110</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">111</td>
<td class="src"><pre><code class="objc">@implementation ZMTaskProgressHandler</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">112</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">113</td>
<td class="src"><pre><code class="objc">+ (instancetype)handlerOnGroupQueue:(id&lt;ZMSGroupQueue&gt;)groupQueue block:(ZMProgressHandlerBlock)block;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">114</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">115</td>
<td class="src"><pre><code class="objc">    RequireString(block != nil, "Invalid completion handler");</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">116</td>
<td class="src"><pre><code class="objc">    RequireString(groupQueue != nil, "Invalid group queue");</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">117</td>
<td class="src"><pre><code class="objc">    ZMTaskProgressHandler *handler = [[self alloc] init];</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">118</td>
<td class="src"><pre><code class="objc">    if (handler != nil) {</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">119</td>
<td class="src"><pre><code class="objc">        handler.groupQueue = groupQueue;</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">120</td>
<td class="src"><pre><code class="objc">        handler.block = block;</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">121</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">122</td>
<td class="src"><pre><code class="objc">    return handler;</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">123</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="never">
<td class="num">124</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">125</td>
<td class="src"><pre><code class="objc">@end;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">126</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">127</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">128</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">129</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">130</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">131</td>
<td class="src"><pre><code class="objc">@interface ZMTransportRequest ()</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">132</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">133</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) id&lt;ZMTransportData&gt; payload;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">134</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) NSString *path;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">135</td>
<td class="src"><pre><code class="objc">@property (nonatomic) ZMTransportRequestMethod method;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">136</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) NSData *binaryData;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">137</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) NSString *binaryDataType;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">138</td>
<td class="src"><pre><code class="objc">@property (nonatomic, copy) NSDictionary *contentDisposition;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">139</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSMutableArray &lt;ZMTaskCreatedHandler*&gt; *taskCreatedHandlers;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">140</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSMutableArray &lt;ZMCompletionHandler *&gt; *completionHandlers;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">141</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSMutableArray &lt;ZMTaskProgressHandler *&gt; *progressHandlers;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">142</td>
<td class="src"><pre><code class="objc">@property (nonatomic) BOOL needsAuthentication;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">143</td>
<td class="src"><pre><code class="objc">@property (nonatomic) BOOL responseWillContainAccessToken;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">144</td>
<td class="src"><pre><code class="objc">@property (nonatomic) BOOL responseWillContainCookie;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">145</td>
<td class="src"><pre><code class="objc">@property (nonatomic) ZMTransportAccept acceptedResponseMediaTypes; ///&lt; C.f. RFC 7231 section 5.3.2 &lt;http://tools.ietf.org/html/rfc7231#section-5.3.2&gt;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">146</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSDate *timeoutDate;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">147</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSMutableArray&lt;NSString *&gt;* debugInformation;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">148</td>
<td class="src"><pre><code class="objc">@property (nonatomic) BOOL shouldCompress;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">149</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSURL *fileUploadURL;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">150</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSDate *startOfUploadTimestamp;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">151</td>
<td class="src"><pre><code class="objc">@property (nonatomic) ZMTransportRequestSessionType transportSessionType;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">152</td>
<td class="src"><pre><code class="objc">@property (nonatomic) float progress;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">153</td>
<td class="src"><pre><code class="objc">@property (nonatomic) NSMutableDictionary &lt;NSString *, NSString *&gt; *additionalHeaderFields;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">154</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">155</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">156</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">157</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">158</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">159</td>
<td class="src"><pre><code class="objc">@implementation ZMTransportRequest</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">160</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">161</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">162</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">163</td>
<td class="src"><pre><code class="objc">    return [self initWithPath:path method:method payload:payload authentication:ZMTransportRequestAuthNeedsAccess shouldCompress:NO];</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">164</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="never">
<td class="num">165</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">166</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload shouldCompress:(BOOL)shouldCompress</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">167</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">168</td>
<td class="src"><pre><code class="objc">    return [self initWithPath:path method:method payload:payload authentication:ZMTransportRequestAuthNeedsAccess shouldCompress:shouldCompress];</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">169</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="never">
<td class="num">170</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">171</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload authentication:(ZMTransportRequestAuth)authentication shouldCompress:(BOOL)shouldCompress;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">172</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">173</td>
<td class="src"><pre><code class="objc">    self = [super init];</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">174</td>
<td class="src"><pre><code class="objc">    if (self) {</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">175</td>
<td class="src"><pre><code class="objc">        self.payload = payload;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">176</td>
<td class="src"><pre><code class="objc">        self.path = path;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">177</td>
<td class="src"><pre><code class="objc">        self.method = method;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">178</td>
<td class="src"><pre><code class="objc">        self.needsAuthentication = (authentication == ZMTransportRequestAuthNeedsAccess);</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">179</td>
<td class="src"><pre><code class="objc">        self.responseWillContainAccessToken = (authentication == ZMTransportRequestAuthCreatesCookieAndAccessToken);</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">180</td>
<td class="src"><pre><code class="objc">        self.responseWillContainCookie = (authentication == ZMTransportRequestAuthCreatesCookieAndAccessToken);</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">181</td>
<td class="src"><pre><code class="objc">        self.acceptedResponseMediaTypes = ZMTransportAcceptTransportData;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">182</td>
<td class="src"><pre><code class="objc">        self.shouldCompress = shouldCompress;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">183</td>
<td class="src"><pre><code class="objc">        self.debugInformation = [NSMutableArray array];</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">184</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">185</td>
<td class="src"><pre><code class="objc">    return self;</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="covered">
<td class="num">186</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">138x</td>
</tr>
<tr class="never">
<td class="num">187</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">188</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload authentication:(ZMTransportRequestAuth)authentication;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">189</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="covered">
<td class="num">190</td>
<td class="src"><pre><code class="objc">    return [self initWithPath:path method:method payload:payload authentication:authentication shouldCompress:NO];</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="covered">
<td class="num">191</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="never">
<td class="num">192</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">193</td>
<td class="src"><pre><code class="objc">+ (instancetype)requestWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">194</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">82x</td>
</tr>
<tr class="covered">
<td class="num">195</td>
<td class="src"><pre><code class="objc">    return [[self class] requestWithPath:path method:method payload:payload shouldCompress:NO];</code></pre></td>
<td class="coverage">82x</td>
</tr>
<tr class="covered">
<td class="num">196</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">82x</td>
</tr>
<tr class="never">
<td class="num">197</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">198</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">199</td>
<td class="src"><pre><code class="objc">+ (instancetype)requestWithPath:(NSString *)path method:(ZMTransportRequestMethod)method payload:(id &lt;ZMTransportData&gt;)payload shouldCompress:(BOOL)shouldCompress</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">200</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">201</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *result = [[self alloc] initWithPath:path method:method payload:payload shouldCompress:shouldCompress];</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">202</td>
<td class="src"><pre><code class="objc">    Require(result.hasRequiredPayload);</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">203</td>
<td class="src"><pre><code class="objc">    return result;</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="covered">
<td class="num">204</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">83x</td>
</tr>
<tr class="never">
<td class="num">205</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">206</td>
<td class="src"><pre><code class="objc">+ (instancetype)requestGetFromPath:(NSString *)path</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">207</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">37x</td>
</tr>
<tr class="covered">
<td class="num">208</td>
<td class="src"><pre><code class="objc">    return [self requestWithPath:path method:ZMMethodGET payload:nil];</code></pre></td>
<td class="coverage">37x</td>
</tr>
<tr class="covered">
<td class="num">209</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">37x</td>
</tr>
<tr class="never">
<td class="num">210</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">211</td>
<td class="src"><pre><code class="objc">+ (instancetype)compressedGetFromPath:(NSString *)path</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">212</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">213</td>
<td class="src"><pre><code class="objc">    return [self requestWithPath:path method:ZMMethodGET payload:nil shouldCompress:YES];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">214</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">215</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">216</td>
<td class="src"><pre><code class="objc">+ (instancetype)uploadRequestWithFileURL:(NSURL *)url path:(NSString *)path contentType:(NSString *)contentType;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">217</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">218</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *request = [[self.class alloc] initWithPath:path</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">219</td>
<td class="src"><pre><code class="objc">                                                            method:ZMMethodPOST</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">220</td>
<td class="src"><pre><code class="objc">                                                        binaryData:nil</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">221</td>
<td class="src"><pre><code class="objc">                                                              type:contentType</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">222</td>
<td class="src"><pre><code class="objc">                                                contentDisposition:nil];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">223</td>
<td class="src"><pre><code class="objc">    request.fileUploadURL = url;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">224</td>
<td class="src"><pre><code class="objc">    request.shouldFailInsteadOfRetry = YES;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">225</td>
<td class="src"><pre><code class="objc">    [request forceToBackgroundSession];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">226</td>
<td class="src"><pre><code class="objc">    return request;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">227</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">228</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">229</td>
<td class="src"><pre><code class="objc">+ (instancetype)emptyPutRequestWithPath:(NSString *)path;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">230</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">231</td>
<td class="src"><pre><code class="objc">    NSString *type = (hasUTJSONSupport() ? ((__bridge NSString *) kUTTypeJSON) : @"public.json");</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">232</td>
<td class="src"><pre><code class="objc">    return [[self alloc] initWithPath:path method:ZMMethodPUT binaryData:[NSData data] type:type contentDisposition:nil];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">233</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">234</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">235</td>
<td class="src"><pre><code class="objc">+ (instancetype)imageGetRequestFromPath:(NSString *)path;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">236</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">237</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *r = [self requestGetFromPath:path];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">238</td>
<td class="src"><pre><code class="objc">    r.acceptedResponseMediaTypes = ZMTransportAcceptImage;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">239</td>
<td class="src"><pre><code class="objc">    Require(r.hasRequiredPayload);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">240</td>
<td class="src"><pre><code class="objc">    return r;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">241</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">242</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">243</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method binaryData:(NSData *)data type:(NSString *)type contentDisposition:(NSDictionary *)contentDisposition;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">244</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">245</td>
<td class="src"><pre><code class="objc">    return [self initWithPath:path method:method binaryData:data type:type contentDisposition:contentDisposition shouldCompress:NO];</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">246</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="never">
<td class="num">247</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">248</td>
<td class="src"><pre><code class="objc">- (instancetype)initWithPath:(NSString *)path method:(ZMTransportRequestMethod)method binaryData:(NSData *)data type:(NSString *)type contentDisposition:(NSDictionary *)contentDisposition shouldCompress:(BOOL)shouldCompress;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">249</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">250</td>
<td class="src"><pre><code class="objc">    self = [super init];</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">251</td>
<td class="src"><pre><code class="objc">    if (self != nil) {</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">252</td>
<td class="src"><pre><code class="objc">        self.path = path;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">253</td>
<td class="src"><pre><code class="objc">        self.method = method;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">254</td>
<td class="src"><pre><code class="objc">        self.binaryData = data;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">255</td>
<td class="src"><pre><code class="objc">        self.binaryDataType = type;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">256</td>
<td class="src"><pre><code class="objc">        self.contentDisposition = contentDisposition;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">257</td>
<td class="src"><pre><code class="objc">        self.needsAuthentication = YES;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">258</td>
<td class="src"><pre><code class="objc">        self.responseWillContainAccessToken = NO;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">259</td>
<td class="src"><pre><code class="objc">        self.acceptedResponseMediaTypes = ZMTransportAcceptTransportData;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">260</td>
<td class="src"><pre><code class="objc">        self.shouldCompress = shouldCompress;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">261</td>
<td class="src"><pre><code class="objc">        self.debugInformation = [NSMutableArray array];</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">262</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">263</td>
<td class="src"><pre><code class="objc">    return self;</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">264</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="never">
<td class="num">265</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">266</td>
<td class="src"><pre><code class="objc">- (BOOL)isEqual:(id)other</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">267</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">268</td>
<td class="src"><pre><code class="objc">    if (other == self)</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">269</td>
<td class="src"><pre><code class="objc">        return YES;</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="missed">
<td class="num">270</td>
<td class="src"><pre><code class="objc">    if (!other || ![[other class] isEqual:[self class]])</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">271</td>
<td class="src"><pre><code class="objc">        return NO;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">272</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">273</td>
<td class="src"><pre><code class="objc">    return [self isEqualToRequest:other];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">274</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">275</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">276</td>
<td class="src"><pre><code class="objc">- (NSString *)methodAsString {</code></pre></td>
<td class="coverage">135x</td>
</tr>
<tr class="covered">
<td class="num">277</td>
<td class="src"><pre><code class="objc">    return [self.class stringForMethod:self.method];</code></pre></td>
<td class="coverage">135x</td>
</tr>
<tr class="covered">
<td class="num">278</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">135x</td>
</tr>
<tr class="never">
<td class="num">279</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">280</td>
<td class="src"><pre><code class="objc">- (void)expireAfterInterval:(NSTimeInterval)interval;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">281</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">282</td>
<td class="src"><pre><code class="objc">    [self expireAtDate:[NSDate dateWithTimeIntervalSinceNow:interval]];</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">283</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="never">
<td class="num">284</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">285</td>
<td class="src"><pre><code class="objc">- (void)expireAtDate:(NSDate *)date;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">286</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">287</td>
<td class="src"><pre><code class="objc">    _expirationDate = date;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">288</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="never">
<td class="num">289</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">290</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">291</td>
<td class="src"><pre><code class="objc">- (BOOL)hasRequiredPayload;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">292</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">124x</td>
</tr>
<tr class="missed">
<td class="num">293</td>
<td class="src"><pre><code class="objc">    switch (self.method) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">294</td>
<td class="src"><pre><code class="objc">        case ZMMethodGET:</code></pre></td>
<td class="coverage">84x</td>
</tr>
<tr class="covered">
<td class="num">295</td>
<td class="src"><pre><code class="objc">        case ZMMethodHEAD:</code></pre></td>
<td class="coverage">84x</td>
</tr>
<tr class="covered">
<td class="num">296</td>
<td class="src"><pre><code class="objc">            return ((self.payload == nil) &amp;&amp;</code></pre></td>
<td class="coverage">84x</td>
</tr>
<tr class="covered">
<td class="num">297</td>
<td class="src"><pre><code class="objc">                    (self.binaryData == nil));</code></pre></td>
<td class="coverage">84x</td>
</tr>
<tr class="covered">
<td class="num">298</td>
<td class="src"><pre><code class="objc">        case ZMMethodPOST:</code></pre></td>
<td class="coverage">23x</td>
</tr>
<tr class="covered">
<td class="num">299</td>
<td class="src"><pre><code class="objc">        case ZMMethodDELETE:</code></pre></td>
<td class="coverage">23x</td>
</tr>
<tr class="covered">
<td class="num">300</td>
<td class="src"><pre><code class="objc">            // POST and DELETE payload is optional</code></pre></td>
<td class="coverage">23x</td>
</tr>
<tr class="covered">
<td class="num">301</td>
<td class="src"><pre><code class="objc">            return YES;</code></pre></td>
<td class="coverage">23x</td>
</tr>
<tr class="covered">
<td class="num">302</td>
<td class="src"><pre><code class="objc">        case ZMMethodPUT:</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="covered">
<td class="num">303</td>
<td class="src"><pre><code class="objc">            return ((self.payload != nil) ||</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="missed">
<td class="num">304</td>
<td class="src"><pre><code class="objc">                    (self.binaryData != nil));</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">305</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">306</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">124x</td>
</tr>
<tr class="never">
<td class="num">307</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">308</td>
<td class="src"><pre><code class="objc">- (void)setAcceptedResponseMediaTypeOnHTTPRequest:(NSMutableURLRequest *)URLRequest;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">309</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">310</td>
<td class="src"><pre><code class="objc">    NSString *accept;</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">311</td>
<td class="src"><pre><code class="objc">    switch (self.acceptedResponseMediaTypes) {</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="missed">
<td class="num">312</td>
<td class="src"><pre><code class="objc">        case ZMTransportAcceptAnything:</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">313</td>
<td class="src"><pre><code class="objc">            accept = @"*/*";</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">314</td>
<td class="src"><pre><code class="objc">            break;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">315</td>
<td class="src"><pre><code class="objc">        case ZMTransportAcceptTransportData:</code></pre></td>
<td class="coverage">46x</td>
</tr>
<tr class="covered">
<td class="num">316</td>
<td class="src"><pre><code class="objc">            accept = [ZMTransportCodec encodedContentType];</code></pre></td>
<td class="coverage">46x</td>
</tr>
<tr class="covered">
<td class="num">317</td>
<td class="src"><pre><code class="objc">            break;</code></pre></td>
<td class="coverage">46x</td>
</tr>
<tr class="covered">
<td class="num">318</td>
<td class="src"><pre><code class="objc">        case ZMTransportAcceptImage:</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">319</td>
<td class="src"><pre><code class="objc">            accept = [[self imageMediaTypes] componentsJoinedByString:@", "];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">320</td>
<td class="src"><pre><code class="objc">            break;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">321</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">322</td>
<td class="src"><pre><code class="objc">    [URLRequest addValue:accept forHTTPHeaderField:@"Accept"];</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">323</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="never">
<td class="num">324</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">325</td>
<td class="src"><pre><code class="objc">- (void)setBodyDataAndMediaTypeOnHTTPRequest:(NSMutableURLRequest *)URLRequest;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">326</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">327</td>
<td class="src"><pre><code class="objc">    static NSString * const ContentTypeHeader = @"Content-Type";</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">328</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">329</td>
<td class="src"><pre><code class="objc">    BOOL isFileUploadWithContentType = (self.binaryDataType != nil) &amp;&amp; (self.fileUploadURL != nil);</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">330</td>
<td class="src"><pre><code class="objc">    BOOL hasBinaryData = (self.binaryDataType != nil) &amp;&amp; (self.binaryData != nil);</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">331</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">332</td>
<td class="src"><pre><code class="objc">    if (hasBinaryData || isFileUploadWithContentType) {</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">333</td>
<td class="src"><pre><code class="objc">        NSString *mediaType;</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">334</td>
<td class="src"><pre><code class="objc">        if (! hasUTJSONSupport()) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="missed">
<td class="num">335</td>
<td class="src"><pre><code class="objc">            if ([self.binaryDataType isEqualToString:@"public.json"]) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">336</td>
<td class="src"><pre><code class="objc">                mediaType = [ZMTransportCodec encodedContentType];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">337</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">338</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">339</td>
<td class="src"><pre><code class="objc">        if (mediaType == nil) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">340</td>
<td class="src"><pre><code class="objc">            mediaType = CFBridgingRelease(UTTypeCopyPreferredTagWithClass((__bridge CFStringRef) self.binaryDataType, kUTTagClassMIMEType));</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">341</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">342</td>
<td class="src"><pre><code class="objc">        if (mediaType != nil) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">343</td>
<td class="src"><pre><code class="objc">            [URLRequest addValue:mediaType forHTTPHeaderField:ContentTypeHeader];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">344</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">345</td>
<td class="src"><pre><code class="objc">        else {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">346</td>
<td class="src"><pre><code class="objc">            [URLRequest addValue:self.binaryDataType forHTTPHeaderField:ContentTypeHeader];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">347</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">348</td>
<td class="src"><pre><code class="objc">        if (hasBinaryData) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">349</td>
<td class="src"><pre><code class="objc">            URLRequest.HTTPBody = self.binaryData;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">350</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">351</td>
<td class="src"><pre><code class="objc">    } else if (self.payload != nil) {</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">352</td>
<td class="src"><pre><code class="objc">        URLRequest.HTTPBody = [ZMTransportCodec encodedTransportData:self.payload];</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="covered">
<td class="num">353</td>
<td class="src"><pre><code class="objc">        [URLRequest addValue:[ZMTransportCodec encodedContentType] forHTTPHeaderField:ContentTypeHeader];</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="covered">
<td class="num">354</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="covered">
<td class="num">355</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">356</td>
<td class="src"><pre><code class="objc">    // Check if we want to use HTTP compression:</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">357</td>
<td class="src"><pre><code class="objc">    //</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">358</td>
<td class="src"><pre><code class="objc">    if (self.shouldCompress) {</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="covered">
<td class="num">359</td>
<td class="src"><pre><code class="objc">        static NSUInteger const MaxUncompressedBodyLength = 500;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">360</td>
<td class="src"><pre><code class="objc">        </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">361</td>
<td class="src"><pre><code class="objc">        if ([[URLRequest valueForHTTPHeaderField:ContentTypeHeader] isEqualToString:[ZMTransportCodec encodedContentType]] &amp;&amp;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">362</td>
<td class="src"><pre><code class="objc">            (MaxUncompressedBodyLength &lt; URLRequest.HTTPBody.length))</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">363</td>
<td class="src"><pre><code class="objc">        {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">364</td>
<td class="src"><pre><code class="objc">            // https://en.wikipedia.org/wiki/HTTP_compression</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">365</td>
<td class="src"><pre><code class="objc">            NSData *compressed = [URLRequest.HTTPBody zm_gzipCompressedHTTPBody];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">366</td>
<td class="src"><pre><code class="objc">            if (compressed.length &lt; URLRequest.HTTPBody.length) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">367</td>
<td class="src"><pre><code class="objc">                URLRequest.HTTPBody = compressed;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">368</td>
<td class="src"><pre><code class="objc">                [URLRequest addValue:@"gzip" forHTTPHeaderField:@"Content-Encoding"];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">369</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">370</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">371</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">372</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">53x</td>
</tr>
<tr class="never">
<td class="num">373</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">374</td>
<td class="src"><pre><code class="objc">- (void)addValue:(NSString *)value forAdditionalHeaderField:(NSString *)headerField</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">375</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">376</td>
<td class="src"><pre><code class="objc">    if (nil == self.additionalHeaderFields) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">377</td>
<td class="src"><pre><code class="objc">        self.additionalHeaderFields = @{headerField: value}.mutableCopy;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">378</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">379</td>
<td class="src"><pre><code class="objc">        self.additionalHeaderFields[headerField] = value;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">380</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">381</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">382</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">383</td>
<td class="src"><pre><code class="objc">- (void)setAdditionalHeaderFieldsOnHTTPRequest:(NSMutableURLRequest *)URLRequest</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">384</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">50x</td>
</tr>
<tr class="covered">
<td class="num">385</td>
<td class="src"><pre><code class="objc">    [self.additionalHeaderFields enumerateKeysAndObjectsUsingBlock:^(NSString *headerField, NSString *value, __unused BOOL *stop) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">386</td>
<td class="src"><pre><code class="objc">        [URLRequest setValue:value forHTTPHeaderField:headerField];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">387</td>
<td class="src"><pre><code class="objc">    }];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">388</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">50x</td>
</tr>
<tr class="never">
<td class="num">389</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">390</td>
<td class="src"><pre><code class="objc">- (void)setTimeoutIntervalOnRequestIfNeeded:(NSMutableURLRequest *)request</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">391</td>
<td class="src"><pre><code class="objc">                  applicationIsBackgrounded:(BOOL)inBackground</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">392</td>
<td class="src"><pre><code class="objc">                     usingBackgroundSession:(BOOL)usingBackgroundSession</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">393</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">51x</td>
</tr>
<tr class="covered">
<td class="num">394</td>
<td class="src"><pre><code class="objc">    // We only want to override the timeout for requests using</code></pre></td>
<td class="coverage">51x</td>
</tr>
<tr class="covered">
<td class="num">395</td>
<td class="src"><pre><code class="objc">    // the foregroundsession while we are running in the background</code></pre></td>
<td class="coverage">51x</td>
</tr>
<tr class="covered">
<td class="num">396</td>
<td class="src"><pre><code class="objc">    if (! inBackground || usingBackgroundSession) {</code></pre></td>
<td class="coverage">51x</td>
</tr>
<tr class="covered">
<td class="num">397</td>
<td class="src"><pre><code class="objc">        return;</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">398</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">399</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">51x</td>
</tr>
<tr class="covered">
<td class="num">400</td>
<td class="src"><pre><code class="objc">    request.timeoutInterval = ZMTransportRequestReducedExpirationInterval;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">401</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">402</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">403</td>
<td class="src"><pre><code class="objc">- (void)setContentDispositionOnHTTPRequest:(NSMutableURLRequest *)URLRequest;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">404</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">405</td>
<td class="src"><pre><code class="objc">    if (self.contentDisposition == nil) {</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">406</td>
<td class="src"><pre><code class="objc">        return;</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">407</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">408</td>
<td class="src"><pre><code class="objc">    NSMutableArray *components = [NSMutableArray array];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">409</td>
<td class="src"><pre><code class="objc">    NSArray *keys;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">410</td>
<td class="src"><pre><code class="objc">    ZM_ALLOW_MISSING_SELECTOR(keys = [self.contentDisposition.allKeys sortedArrayUsingSelector:@selector(compare:)]);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">411</td>
<td class="src"><pre><code class="objc">    for (NSString *key in keys) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">412</td>
<td class="src"><pre><code class="objc">        NSString *stringValue = nil;</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">413</td>
<td class="src"><pre><code class="objc">        id value = self.contentDisposition[key];</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">414</td>
<td class="src"><pre><code class="objc">        if (value == [NSNull null]) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">415</td>
<td class="src"><pre><code class="objc">            // nothing;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">416</td>
<td class="src"><pre><code class="objc">        } else if ([value isKindOfClass:[NSNumber class]]) {</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">417</td>
<td class="src"><pre><code class="objc">            if (value == (__bridge id) kCFBooleanTrue) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">418</td>
<td class="src"><pre><code class="objc">                stringValue = @"true";</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">419</td>
<td class="src"><pre><code class="objc">            } else if (value == (__bridge id) kCFBooleanFalse) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">420</td>
<td class="src"><pre><code class="objc">                stringValue = @"false";</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">421</td>
<td class="src"><pre><code class="objc">            } else {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">422</td>
<td class="src"><pre><code class="objc">                stringValue = [value description];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">423</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">424</td>
<td class="src"><pre><code class="objc">        } else if ([value isKindOfClass:[NSString class]]) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">425</td>
<td class="src"><pre><code class="objc">            stringValue = value;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">426</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">427</td>
<td class="src"><pre><code class="objc">        if ((stringValue != nil) &amp;&amp; ([stringValue rangeOfString:@" "].location != NSNotFound)) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">428</td>
<td class="src"><pre><code class="objc">            // Not super nice.</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">429</td>
<td class="src"><pre><code class="objc">            stringValue = [NSString stringWithFormat:@"\"%@\"", stringValue];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">430</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">431</td>
<td class="src"><pre><code class="objc">        if (stringValue != nil) {</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">432</td>
<td class="src"><pre><code class="objc">            [components addObject:[NSString stringWithFormat:@"%@=%@", key, stringValue]];</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">433</td>
<td class="src"><pre><code class="objc">        } else {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">434</td>
<td class="src"><pre><code class="objc">            [components insertObject:key atIndex:0];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">435</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">436</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">7x</td>
</tr>
<tr class="covered">
<td class="num">437</td>
<td class="src"><pre><code class="objc">    NSString *disposition = [components componentsJoinedByString:@";"];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">438</td>
<td class="src"><pre><code class="objc">    [URLRequest addValue:disposition forHTTPHeaderField:@"Content-Disposition"];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">439</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">440</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">441</td>
<td class="src"><pre><code class="objc">- (NSString *)descriptionWithMethodAndPath;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">442</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">443</td>
<td class="src"><pre><code class="objc">    NSString *path = self.path;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">444</td>
<td class="src"><pre><code class="objc">    if (68 &lt; path.length) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">445</td>
<td class="src"><pre><code class="objc">        path = [[path substringToIndex:66] stringByAppendingFormat:@"[&#65533;&#65533;&#65533;](%u)", (unsigned) path.length];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">446</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">447</td>
<td class="src"><pre><code class="objc">    return [NSString stringWithFormat:@"&lt;%@: %p&gt; %@ %@",</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">448</td>
<td class="src"><pre><code class="objc">            self.class, self, [ZMTransportRequest stringForMethod:self.method], path];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">449</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">450</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">451</td>
<td class="src"><pre><code class="objc">- (NSArray *)imageMediaTypes;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">452</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">453</td>
<td class="src"><pre><code class="objc">    NSMutableArray *types = [NSMutableArray array];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">454</td>
<td class="src"><pre><code class="objc">    {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">455</td>
<td class="src"><pre><code class="objc">        for (NSString *uti in CFBridgingRelease(CGImageSourceCopyTypeIdentifiers())) {</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="covered">
<td class="num">456</td>
<td class="src"><pre><code class="objc">            NSString *mime = CFBridgingRelease(UTTypeCopyPreferredTagWithClass((__bridge CFStringRef) uti, kUTTagClassMIMEType));</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="covered">
<td class="num">457</td>
<td class="src"><pre><code class="objc">            if ((mime == nil) || [mime hasPrefix:@"image/x-"] || [mime hasPrefix:@"application/"]) {</code></pre></td>
<td class="coverage">45x</td>
</tr>
<tr class="covered">
<td class="num">458</td>
<td class="src"><pre><code class="objc">                continue;</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">459</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">460</td>
<td class="src"><pre><code class="objc">            [types addObject:mime];</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="covered">
<td class="num">461</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">9x</td>
</tr>
<tr class="covered">
<td class="num">462</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">463</td>
<td class="src"><pre><code class="objc">    return types;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">464</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">465</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">466</td>
<td class="src"><pre><code class="objc">- (void)addTaskCreatedHandler:(ZMTaskCreatedHandler *)taskCreatedHandler;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">467</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">468</td>
<td class="src"><pre><code class="objc">    VerifyReturn(taskCreatedHandler != nil);</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">469</td>
<td class="src"><pre><code class="objc">    if (self.taskCreatedHandlers == nil) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">470</td>
<td class="src"><pre><code class="objc">        self.taskCreatedHandlers = [NSMutableArray arrayWithObject:taskCreatedHandler];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">471</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">472</td>
<td class="src"><pre><code class="objc">        [self.taskCreatedHandlers addObject:taskCreatedHandler];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">473</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">474</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">475</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">476</td>
<td class="src"><pre><code class="objc">- (void)callTaskCreationHandlersWithIdentifier:(NSUInteger)identifier sessionIdentifier:(NSString *)sessionIdentifier;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">477</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">478</td>
<td class="src"><pre><code class="objc">    ZMTaskIdentifier *taskIdentifier = [ZMTaskIdentifier identifierWithIdentifier:identifier sessionIdentifier:sessionIdentifier];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">479</td>
<td class="src"><pre><code class="objc">    NSString *label = [NSString stringWithFormat:@"Task created handler of REQ %@ %@ -&gt; %@ ", self.methodAsString, self.path, taskIdentifier];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">480</td>
<td class="src"><pre><code class="objc">    ZMBackgroundActivity *creationActivity = [[BackgroundActivityFactory sharedInstance] backgroundActivityWithName:NSStringFromSelector(_cmd)];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">481</td>
<td class="src"><pre><code class="objc">    ZMSDispatchGroup *handlerGroup = [ZMSDispatchGroup groupWithLabel:@"ZMTransportRequest task creation handler"];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">482</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">483</td>
<td class="src"><pre><code class="objc">    for (ZMTaskCreatedHandler *handler in self.taskCreatedHandlers) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">484</td>
<td class="src"><pre><code class="objc">        id&lt;ZMSGroupQueue&gt; queue = handler.groupQueue;</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">485</td>
<td class="src"><pre><code class="objc">        [handlerGroup enter];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">486</td>
<td class="src"><pre><code class="objc">        if (nil != queue) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">487</td>
<td class="src"><pre><code class="objc">            [queue performGroupedBlock:^{</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">488</td>
<td class="src"><pre><code class="objc">                ZMSTimePoint *tp = [ZMSTimePoint timePointWithInterval:6 label:label];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">489</td>
<td class="src"><pre><code class="objc">                handler.block(taskIdentifier);</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">490</td>
<td class="src"><pre><code class="objc">                [tp warnIfLongerThanInterval];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">491</td>
<td class="src"><pre><code class="objc">                [handlerGroup leave];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">492</td>
<td class="src"><pre><code class="objc">            }];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">493</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">494</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">495</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">496</td>
<td class="src"><pre><code class="objc">    [handlerGroup notifyOnQueue:dispatch_get_main_queue() block:^{</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">497</td>
<td class="src"><pre><code class="objc">        [creationActivity endActivity];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">498</td>
<td class="src"><pre><code class="objc">    }];</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="covered">
<td class="num">499</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">20x</td>
</tr>
<tr class="never">
<td class="num">500</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">501</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">502</td>
<td class="src"><pre><code class="objc">- (void)addCompletionHandler:(ZMCompletionHandler *)completionHandler;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">503</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">504</td>
<td class="src"><pre><code class="objc">    VerifyReturn(completionHandler != nil);</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">505</td>
<td class="src"><pre><code class="objc">    if (self.completionHandlers == nil) {</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="covered">
<td class="num">506</td>
<td class="src"><pre><code class="objc">        self.completionHandlers = [NSMutableArray arrayWithObject:completionHandler];</code></pre></td>
<td class="coverage">46x</td>
</tr>
<tr class="covered">
<td class="num">507</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">508</td>
<td class="src"><pre><code class="objc">        [self.completionHandlers addObject:completionHandler];</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">509</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">510</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">49x</td>
</tr>
<tr class="never">
<td class="num">511</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">512</td>
<td class="src"><pre><code class="objc">- (void)addProgressHandler:(ZMTaskProgressHandler *)progressHandler;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">513</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">514</td>
<td class="src"><pre><code class="objc">    VerifyReturn(progressHandler != nil);</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">515</td>
<td class="src"><pre><code class="objc">    if (self.progressHandlers == nil) {</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">516</td>
<td class="src"><pre><code class="objc">        self.progressHandlers = [NSMutableArray arrayWithObject:progressHandler];</code></pre></td>
<td class="coverage">5x</td>
</tr>
<tr class="covered">
<td class="num">517</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">518</td>
<td class="src"><pre><code class="objc">        [self.progressHandlers addObject:progressHandler];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">519</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">520</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="never">
<td class="num">521</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">522</td>
<td class="src"><pre><code class="objc">- (void)completeWithResponse:(ZMTransportResponse *)response</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">523</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">524</td>
<td class="src"><pre><code class="objc">    response.startOfUploadTimestamp = self.startOfUploadTimestamp;</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">525</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">526</td>
<td class="src"><pre><code class="objc">    ZMBackgroundActivity *completeActivity = [[BackgroundActivityFactory sharedInstance] backgroundActivityWithName:NSStringFromSelector(_cmd)];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">527</td>
<td class="src"><pre><code class="objc">    ZMSDispatchGroup *group = response.dispatchGroup;</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">528</td>
<td class="src"><pre><code class="objc">    ZMSDispatchGroup *group2 = [ZMSDispatchGroup groupWithLabel:@"ZMTransportRequest"];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">529</td>
<td class="src"><pre><code class="objc">    [group2 enter];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">530</td>
<td class="src"><pre><code class="objc">    for(ZMCompletionHandler *handler in self.completionHandlers) {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">531</td>
<td class="src"><pre><code class="objc">        id&lt;ZMSGroupQueue&gt; queue = handler.groupQueue;</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">532</td>
<td class="src"><pre><code class="objc">        if (queue != nil) {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">533</td>
<td class="src"><pre><code class="objc">            if (group) {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="missed">
<td class="num">534</td>
<td class="src"><pre><code class="objc">                [group enter];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">535</td>
<td class="src"><pre><code class="objc">            }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">536</td>
<td class="src"><pre><code class="objc">            [group2 enter];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">537</td>
<td class="src"><pre><code class="objc">            [queue performGroupedBlock:^{</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">538</td>
<td class="src"><pre><code class="objc">                NSString *label = [NSString stringWithFormat:@"Completion handler of REQ %@ %@ -&gt; %@ ",</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">539</td>
<td class="src"><pre><code class="objc">                                   self.methodAsString,</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">540</td>
<td class="src"><pre><code class="objc">                                   self.path,</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">541</td>
<td class="src"><pre><code class="objc">                                   @(response.HTTPStatus)</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">542</td>
<td class="src"><pre><code class="objc">                                   ];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">543</td>
<td class="src"><pre><code class="objc">                ZMSTimePoint *tp = [ZMSTimePoint timePointWithInterval:6 label:label];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">544</td>
<td class="src"><pre><code class="objc">                handler.block(response);</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">545</td>
<td class="src"><pre><code class="objc">                [tp warnIfLongerThanInterval];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">546</td>
<td class="src"><pre><code class="objc">                if (group) {</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="missed">
<td class="num">547</td>
<td class="src"><pre><code class="objc">                    [group leave];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">548</td>
<td class="src"><pre><code class="objc">                }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">549</td>
<td class="src"><pre><code class="objc">                [group2 leave];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">550</td>
<td class="src"><pre><code class="objc">            }];</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">551</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">552</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">36x</td>
</tr>
<tr class="covered">
<td class="num">553</td>
<td class="src"><pre><code class="objc">    [group2 leave];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">554</td>
<td class="src"><pre><code class="objc">    [group2 notifyOnQueue:dispatch_get_main_queue() block:^{</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">555</td>
<td class="src"><pre><code class="objc">        [completeActivity endActivity];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">556</td>
<td class="src"><pre><code class="objc">    }];</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="covered">
<td class="num">557</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">40x</td>
</tr>
<tr class="never">
<td class="num">558</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">559</td>
<td class="src"><pre><code class="objc">- (void)updateProgress:(float)progress</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">560</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">561</td>
<td class="src"><pre><code class="objc">    float limitedProgress = progress;</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">562</td>
<td class="src"><pre><code class="objc">    if (limitedProgress &gt; 1.0f) {</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">563</td>
<td class="src"><pre><code class="objc">        limitedProgress = 1.0f;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">564</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">565</td>
<td class="src"><pre><code class="objc">    if (limitedProgress &lt; 0.0f) {</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">566</td>
<td class="src"><pre><code class="objc">        limitedProgress = 0.0f;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">567</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">568</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">569</td>
<td class="src"><pre><code class="objc">    self.progress = limitedProgress;</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">570</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="covered">
<td class="num">571</td>
<td class="src"><pre><code class="objc">    for (ZMTaskProgressHandler *progresHandler in self.progressHandlers) {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">572</td>
<td class="src"><pre><code class="objc">        id&lt;ZMSGroupQueue&gt; queue = progresHandler.groupQueue;</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">573</td>
<td class="src"><pre><code class="objc">        if (queue != nil) {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">574</td>
<td class="src"><pre><code class="objc">            [queue performGroupedBlock:^{</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">575</td>
<td class="src"><pre><code class="objc">                progresHandler.block(limitedProgress);</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">576</td>
<td class="src"><pre><code class="objc">            }];</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">577</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">578</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">579</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">24x</td>
</tr>
<tr class="never">
<td class="num">580</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">581</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">582</td>
<td class="src"><pre><code class="objc">- (BOOL)shouldUseOnlyBackgroundSession</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">583</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">584</td>
<td class="src"><pre><code class="objc">    return self.transportSessionType == ZMTransportRequestSessionTypeUseBackgroundSessionOnly;</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="covered">
<td class="num">585</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">47x</td>
</tr>
<tr class="never">
<td class="num">586</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">587</td>
<td class="src"><pre><code class="objc">- (BOOL)shouldUseVoipSession</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">588</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="covered">
<td class="num">589</td>
<td class="src"><pre><code class="objc">    return self.transportSessionType == ZMTransportRequestSessionTypeUseVoipSessionOnly;</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="covered">
<td class="num">590</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="never">
<td class="num">591</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">592</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">593</td>
<td class="src"><pre><code class="objc">- (void)forceToBackgroundSession</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">594</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">595</td>
<td class="src"><pre><code class="objc">    self.transportSessionType = ZMTransportRequestSessionTypeUseBackgroundSessionOnly;</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">596</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="never">
<td class="num">597</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">598</td>
<td class="src"><pre><code class="objc">- (void)forceToVoipSession;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">599</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">600</td>
<td class="src"><pre><code class="objc">    self.transportSessionType = ZMTransportRequestSessionTypeUseVoipSessionOnly;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">601</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">602</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">603</td>
<td class="src"><pre><code class="objc">- (NSString *)completionHandlerDescription;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">604</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">605</td>
<td class="src"><pre><code class="objc">    return [NSString stringWithFormat:@"%@ %@", self.methodAsString, self.path];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">606</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">607</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">608</td>
<td class="src"><pre><code class="objc">- (BOOL)isEqualToRequest:(ZMTransportRequest *)request</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">609</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">610</td>
<td class="src"><pre><code class="objc">    if (self == request) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">611</td>
<td class="src"><pre><code class="objc">        return YES;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">612</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">613</td>
<td class="src"><pre><code class="objc">    if (request == nil) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">614</td>
<td class="src"><pre><code class="objc">        return NO;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">615</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">616</td>
<td class="src"><pre><code class="objc">    return ((self.payload == request.payload || [self.payload isEqual:request.payload]) &amp;&amp;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">617</td>
<td class="src"><pre><code class="objc">            (self.path == request.path || [self.path isEqualToString:request.path]) &amp;&amp;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">618</td>
<td class="src"><pre><code class="objc">            (self.method == request.method) &amp;&amp;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">619</td>
<td class="src"><pre><code class="objc">            (self.acceptedResponseMediaTypes == request.acceptedResponseMediaTypes) &amp;&amp;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">620</td>
<td class="src"><pre><code class="objc">            (self.responseWillContainAccessToken == request.responseWillContainAccessToken) &amp;&amp;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">621</td>
<td class="src"><pre><code class="objc">            (self.responseWillContainCookie == request.responseWillContainCookie));</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">622</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">623</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">624</td>
<td class="src"><pre><code class="objc">- (NSString *)description</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">625</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">626</td>
<td class="src"><pre><code class="objc">    NSMutableString *description = [NSMutableString stringWithFormat:@"&lt;%@: %p&gt;", [self class], self];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">627</td>
<td class="src"><pre><code class="objc">    [description appendFormat:@" \"%@\"", self.methodAsString];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">628</td>
<td class="src"><pre><code class="objc">    if (self.path) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">629</td>
<td class="src"><pre><code class="objc">        [description appendFormat:@" path \"%@\"", self.path];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">630</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">631</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">632</td>
<td class="src"><pre><code class="objc">    [description appendFormat:@" %lu completionHandler(s)", (unsigned long)self.completionHandlers.count];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">633</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">634</td>
<td class="src"><pre><code class="objc">    if (self.payload) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="missed">
<td class="num">635</td>
<td class="src"><pre><code class="objc">        [description appendFormat:@" payload: %@", self.payload];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">636</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">637</td>
<td class="src"><pre><code class="objc">    if (self.binaryData) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="missed">
<td class="num">638</td>
<td class="src"><pre><code class="objc">        [description appendFormat:@" binary data: %llu", (unsigned long long) self.binaryData.length];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">639</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">640</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="missed">
<td class="num">641</td>
<td class="src"><pre><code class="objc">    for (ZMMultipartBodyItem *bodyItem in self.multipartBodyItems) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">642</td>
<td class="src"><pre><code class="objc">        [description appendString:[NSString stringWithFormat:@"\n----\nBody item: \n%@", bodyItem.description]];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">643</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">644</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">645</td>
<td class="src"><pre><code class="objc">    if (self.debugInformation.count &gt; 0) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">646</td>
<td class="src"><pre><code class="objc">        [description appendString:@"\n"];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">647</td>
<td class="src"><pre><code class="objc">        for(NSString *info in self.debugInformation) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">648</td>
<td class="src"><pre><code class="objc">            [description appendString:info];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">649</td>
<td class="src"><pre><code class="objc">            [description appendString:@"\n"];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">650</td>
<td class="src"><pre><code class="objc">        }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">651</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">652</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">653</td>
<td class="src"><pre><code class="objc">    return description;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">654</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">655</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">656</td>
<td class="src"><pre><code class="objc">- (NSUInteger)hash</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">657</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">658</td>
<td class="src"><pre><code class="objc">    NSUInteger hash = [self.payload hash];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">659</td>
<td class="src"><pre><code class="objc">    hash = hash * 31u + [self.path hash];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">660</td>
<td class="src"><pre><code class="objc">    hash = hash * 31u + [self.methodAsString hash];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">661</td>
<td class="src"><pre><code class="objc">    return hash;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">662</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">663</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">664</td>
<td class="src"><pre><code class="objc">+ (ZMTransportRequestMethod)methodFromString:(NSString *)string</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">665</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">666</td>
<td class="src"><pre><code class="objc">    if([string isEqualToString:@"GET"]) {</code></pre></td>
<td class="coverage">10x</td>
</tr>
<tr class="covered">
<td class="num">667</td>
<td class="src"><pre><code class="objc">        return ZMMethodGET;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">668</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">669</td>
<td class="src"><pre><code class="objc">    if([string isEqualToString:@"POST"]) {</code></pre></td>
<td class="coverage">8x</td>
</tr>
<tr class="covered">
<td class="num">670</td>
<td class="src"><pre><code class="objc">        return ZMMethodPOST;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">671</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">672</td>
<td class="src"><pre><code class="objc">    if([string isEqualToString:@"DELETE"]) {</code></pre></td>
<td class="coverage">6x</td>
</tr>
<tr class="covered">
<td class="num">673</td>
<td class="src"><pre><code class="objc">        return ZMMethodDELETE;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">674</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">675</td>
<td class="src"><pre><code class="objc">    if([string isEqualToString:@"PUT"]) {</code></pre></td>
<td class="coverage">4x</td>
</tr>
<tr class="covered">
<td class="num">676</td>
<td class="src"><pre><code class="objc">        return ZMMethodPUT;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">677</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">678</td>
<td class="src"><pre><code class="objc">    if([string isEqualToString:@"HEAD"]) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">679</td>
<td class="src"><pre><code class="objc">        return ZMMethodHEAD;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">680</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">681</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">682</td>
<td class="src"><pre><code class="objc">    RequireString(false, "Invalid HTTP method string");</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">683</td>
<td class="src"><pre><code class="objc">    return ZMMethodGET;</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">684</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">685</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">686</td>
<td class="src"><pre><code class="objc">+ (NSString *)stringForMethod:(ZMTransportRequestMethod)method</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">687</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">171x</td>
</tr>
<tr class="covered">
<td class="num">688</td>
<td class="src"><pre><code class="objc">    if(method == ZMMethodGET) {</code></pre></td>
<td class="coverage">171x</td>
</tr>
<tr class="covered">
<td class="num">689</td>
<td class="src"><pre><code class="objc">        return @"GET";</code></pre></td>
<td class="coverage">137x</td>
</tr>
<tr class="covered">
<td class="num">690</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">137x</td>
</tr>
<tr class="covered">
<td class="num">691</td>
<td class="src"><pre><code class="objc">    if(method == ZMMethodPOST) {</code></pre></td>
<td class="coverage">34x</td>
</tr>
<tr class="covered">
<td class="num">692</td>
<td class="src"><pre><code class="objc">        return @"POST";</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="covered">
<td class="num">693</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="covered">
<td class="num">694</td>
<td class="src"><pre><code class="objc">    if(method == ZMMethodDELETE) {</code></pre></td>
<td class="coverage">17x</td>
</tr>
<tr class="covered">
<td class="num">695</td>
<td class="src"><pre><code class="objc">        return @"DELETE";</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">696</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">697</td>
<td class="src"><pre><code class="objc">    if(method == ZMMethodPUT) {</code></pre></td>
<td class="coverage">15x</td>
</tr>
<tr class="covered">
<td class="num">698</td>
<td class="src"><pre><code class="objc">        return @"PUT";</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">699</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">12x</td>
</tr>
<tr class="covered">
<td class="num">700</td>
<td class="src"><pre><code class="objc">    if(method == ZMMethodHEAD) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">701</td>
<td class="src"><pre><code class="objc">        return @"HEAD";</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">702</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">703</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="missed">
<td class="num">704</td>
<td class="src"><pre><code class="objc">    RequireString(false, "Invalid HTTP method: %lu", (unsigned long) method);</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">705</td>
<td class="src"><pre><code class="objc">    return @"GET";</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">706</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="never">
<td class="num">707</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">708</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">709</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">710</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">711</td>
<td class="src"><pre><code class="objc">@implementation ZMTransportRequest (AssetGet)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">712</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">713</td>
<td class="src"><pre><code class="objc">+ (instancetype)assetGetRequestFromPath:(NSString *)path assetToken:(NSString *)token;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">714</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">715</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *r = [self requestGetFromPath:path];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">716</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">717</td>
<td class="src"><pre><code class="objc">    if (nil != token) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">718</td>
<td class="src"><pre><code class="objc">        [r addValue:token forAdditionalHeaderField:@"Asset-Token"];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">719</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">720</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">721</td>
<td class="src"><pre><code class="objc">    Require(r.hasRequiredPayload);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">722</td>
<td class="src"><pre><code class="objc">    return r;</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">723</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">724</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">725</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">726</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">727</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">728</td>
<td class="src"><pre><code class="objc">@implementation ZMTransportRequest (ImageUpload)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">729</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">730</td>
<td class="src"><pre><code class="objc">+ (instancetype)postRequestWithPath:(NSString *)path imageData:(NSData *)data contentDisposition:(NSDictionary *)contentDisposition;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">731</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">732</td>
<td class="src"><pre><code class="objc">    VerifyReturnNil(data != nil);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">733</td>
<td class="src"><pre><code class="objc">    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef) data, NULL);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">734</td>
<td class="src"><pre><code class="objc">    VerifyReturnNil(source != NULL);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">735</td>
<td class="src"><pre><code class="objc">    NSString *type = CFBridgingRelease(CGImageSourceGetType(source));</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">736</td>
<td class="src"><pre><code class="objc">    CFRelease(source);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">737</td>
<td class="src"><pre><code class="objc">    if (! UTTypeConformsTo((__bridge CFStringRef) type, kUTTypeImage)) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">738</td>
<td class="src"><pre><code class="objc">        return nil;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">739</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">740</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *result = [[self alloc] initWithPath:path method:ZMMethodPOST binaryData:data type:type contentDisposition:contentDisposition];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">741</td>
<td class="src"><pre><code class="objc">    Require(result.hasRequiredPayload);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">742</td>
<td class="src"><pre><code class="objc">    return result;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">743</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">744</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">745</td>
<td class="src"><pre><code class="objc">+ (instancetype)multipartRequestWithPath:(NSString *)path imageData:(NSData *)imageData metaData:(NSDictionary *)metaData</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">746</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">747</td>
<td class="src"><pre><code class="objc">    VerifyReturnNil(imageData != nil);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">748</td>
<td class="src"><pre><code class="objc">    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef) imageData, NULL);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">749</td>
<td class="src"><pre><code class="objc">    VerifyReturnNil(source != NULL);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">750</td>
<td class="src"><pre><code class="objc">    NSString *type = CFBridgingRelease(CGImageSourceGetType(source));</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">751</td>
<td class="src"><pre><code class="objc">    NSString *mediaType = CFBridgingRelease(UTTypeCopyPreferredTagWithClass((__bridge CFStringRef) type, kUTTagClassMIMEType));</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">752</td>
<td class="src"><pre><code class="objc">    CFRelease(source);</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">753</td>
<td class="src"><pre><code class="objc">    if (! UTTypeConformsTo((__bridge CFStringRef) type, kUTTypeImage)) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">754</td>
<td class="src"><pre><code class="objc">        return nil;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">755</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">756</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">757</td>
<td class="src"><pre><code class="objc">    return [self multipartRequestWithPath:path imageData:imageData metaData:metaData mediaContentType:mediaType];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">758</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">759</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">760</td>
<td class="src"><pre><code class="objc">+ (instancetype)multipartRequestWithPath:(NSString *)path imageData:(NSData *)imageData metaData:(NSDictionary *)metaData mediaContentType:(NSString *)mediaContentType</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">761</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">762</td>
<td class="src"><pre><code class="objc">    NSData *metaDataData = [NSJSONSerialization dataWithJSONObject:metaData options:0 error:NULL];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">763</td>
<td class="src"><pre><code class="objc">    return [self multipartRequestWithPath:path imageData:imageData metaData:metaDataData metaDataContentType:@"application/json; charset=utf-8" mediaContentType:mediaContentType];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">764</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">765</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">766</td>
<td class="src"><pre><code class="objc">+ (instancetype)multipartRequestWithPath:(NSString *)path imageData:(NSData *)imageData metaData:(NSData *)metaData metaDataContentType:(NSString *)metaDataContentType mediaContentType:(NSString *)mediaContentType;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">767</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">768</td>
<td class="src"><pre><code class="objc">    VerifyReturnNil(imageData != nil);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">769</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">770</td>
<td class="src"><pre><code class="objc">    NSString *boundary = @"frontier";</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">771</td>
<td class="src"><pre><code class="objc">    NSString *contentType = [NSString stringWithFormat:@"multipart/mixed; boundary=%@", boundary];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">772</td>
<td class="src"><pre><code class="objc">    NSData *multipartData = [self multipartDataWithImageData:imageData</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">773</td>
<td class="src"><pre><code class="objc">                                                    metaData:metaData</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">774</td>
<td class="src"><pre><code class="objc">                                         metaDataContentType:metaDataContentType</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">775</td>
<td class="src"><pre><code class="objc">                                                   mediaType:mediaContentType</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">776</td>
<td class="src"><pre><code class="objc">                                                    boundary:boundary];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">777</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">778</td>
<td class="src"><pre><code class="objc">    ZMTransportRequest *result = [[self alloc] initWithPath:path</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">779</td>
<td class="src"><pre><code class="objc">                                                     method:ZMMethodPOST</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">780</td>
<td class="src"><pre><code class="objc">                                                 binaryData:multipartData</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">781</td>
<td class="src"><pre><code class="objc">                                                       type:contentType</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">782</td>
<td class="src"><pre><code class="objc">                                         contentDisposition:nil];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">783</td>
<td class="src"><pre><code class="objc">    Require(result.hasRequiredPayload);</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">784</td>
<td class="src"><pre><code class="objc">    return result;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">785</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">786</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">787</td>
<td class="src"><pre><code class="objc">+ (NSData *)multipartDataWithImageData:(NSData *)imageData metaData:(NSData *)metaData metaDataContentType:(NSString *)metaDataContentType mediaType:(NSString *)mediaType boundary:(NSString *)boundary</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">788</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">789</td>
<td class="src"><pre><code class="objc">    ZMMultipartBodyItem *metaDataBodyItem = [[ZMMultipartBodyItem alloc] initWithData:metaData</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">790</td>
<td class="src"><pre><code class="objc">                                                                          contentType:metaDataContentType</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">791</td>
<td class="src"><pre><code class="objc">                                                                              headers:nil];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">792</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">793</td>
<td class="src"><pre><code class="objc">    ZMMultipartBodyItem *imageBodyItem = [[ZMMultipartBodyItem alloc] initWithData:imageData</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">794</td>
<td class="src"><pre><code class="objc">                                                                       contentType:mediaType</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">795</td>
<td class="src"><pre><code class="objc">                                                                           headers:@{</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">796</td>
<td class="src"><pre><code class="objc">                                                                                     @"Content-MD5": [[imageData zmMD5Digest] base64EncodedStringWithOptions:0]</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">797</td>
<td class="src"><pre><code class="objc">                                                                                     }];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">798</td>
<td class="src"><pre><code class="objc">    </code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">799</td>
<td class="src"><pre><code class="objc">    return [NSData multipartDataWithItems:@[metaDataBodyItem, imageBodyItem] boundary:boundary];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">800</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">801</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">802</td>
<td class="src"><pre><code class="objc">- (NSArray *)multipartBodyItems</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">803</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">804</td>
<td class="src"><pre><code class="objc">    if ([self.binaryDataType hasPrefix:@"multipart/mixed"]) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">805</td>
<td class="src"><pre><code class="objc">        NSString *boundary = [[self.binaryDataType componentsSeparatedByString:@";"] lastObject];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">806</td>
<td class="src"><pre><code class="objc">        boundary = [[boundary componentsSeparatedByString:@"="] lastObject];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">807</td>
<td class="src"><pre><code class="objc">        return [self.binaryData multipartDataItemsSeparatedWithBoundary:boundary];</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">808</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">809</td>
<td class="src"><pre><code class="objc">    else {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">810</td>
<td class="src"><pre><code class="objc">        return nil;</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">811</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">812</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">813</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">814</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">815</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">816</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">817</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">818</td>
<td class="src"><pre><code class="objc">@implementation ZMTransportRequest (Debugging)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">819</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">820</td>
<td class="src"><pre><code class="objc">- (void)setDebugInformationTranscoder:(NSObject *)transcoder;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">821</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">822</td>
<td class="src"><pre><code class="objc">    [self.debugInformation addObject:[NSString stringWithFormat:@"Transcoder: &lt;%@&gt; %p", NSStringFromClass(transcoder.class), transcoder]];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">823</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">824</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">825</td>
<td class="src"><pre><code class="objc">- (void)setDebugInformationState:(NSObject *)state;</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">826</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">827</td>
<td class="src"><pre><code class="objc">    [self.debugInformation addObject:[NSString stringWithFormat:@"Sync state: &lt;%@&gt; %p", NSStringFromClass(state.class), state]];</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">828</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">829</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">830</td>
<td class="src"><pre><code class="objc">- (void)appendDebugInformation:(NSString *)debugInformation</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">831</td>
<td class="src"><pre><code class="objc">{</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">832</td>
<td class="src"><pre><code class="objc">    [self.debugInformation addObject:debugInformation];</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">833</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">834</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">835</td>
<td class="src"><pre><code class="objc">- (void)markStartOfUploadTimestamp {</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="covered">
<td class="num">836</td>
<td class="src"><pre><code class="objc">    self.startOfUploadTimestamp = [NSDate date];</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="covered">
<td class="num">837</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage">44x</td>
</tr>
<tr class="never">
<td class="num">838</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">839</td>
<td class="src"><pre><code class="objc">@end</code></pre></td>
<td class="coverage"></td>
</tr>
</table>
</div></div>
<footer><div class="row">
<p><a href="https://github.com/SlatherOrg/slather">Fork me on Github</a></p>
<p>&copy; 2016 Slather</p>
</div></footer><script src="highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
